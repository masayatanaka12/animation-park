"use strict";

// scroll class add
jQuery(window).on("load scroll resize", function () {}); // scroll class add END

// jQuery start
jQuery(function ($) {
  // SP 100vh(スクロールバー対策)
  // $('.loadingLogo').css('height',$(window).height());

  // Smooth scroll
  // ページ内リンク
  var width = $(window).width();
  if (width <= 1023) {
    var headerHight = 60; //ヘッダの高さ
  } else {
    var headerHight = 100; //ヘッダの高さ
  }
  $('a[href^="#"]').click(function () {
    var speed = 800;
    var href = $(this).attr("href");
    var target = $(href == "#" || href == "" ? 'html' : href);
    var position = target.offset().top - headerHight;
    $("html, body").animate({
      scrollTop: position
    }, speed, "swing");
    return false;
  });
});
// jQuery End

document.querySelectorAll('.galleryCard__video').forEach(function (video) {
  // ホバー開始で再生＆フィルタ解除
  video.addEventListener('mouseenter', function () {
    video.play();
  });
  // ホバー終了で一時停止＆フィルタ戻す
  video.addEventListener('mouseleave', function () {
    video.pause();
    video.currentTime = 0; // 先頭に戻す場合
  });
});
document.querySelectorAll('.copy-btn').forEach(function (btn) {
  btn.addEventListener('click', function () {
    console.log('aaa');
    // ① ボタンの親要素内の<code>を探す
    var code = btn.closest('.topGalleryModal__detail').querySelector('code');
    if (!code) return;

    // ② コピー
    navigator.clipboard.writeText(code.innerText).then(function () {
      btn.innerText = 'Copied!';
      setTimeout(function () {
        return btn.innerText = 'Copy';
      }, 1200);
    });
  });
});
document.querySelectorAll('.topGalleryModal__item').forEach(function (tab) {
  tab.addEventListener('click', function () {
    // すべてのタブからactiveを外す
    document.querySelectorAll('.topGalleryModal__item').forEach(function (t) {
      return t.classList.remove('active');
    });
    // すべてのコードパネルを非表示に
    document.querySelectorAll('.topGalleryModal__code').forEach(function (c) {
      return c.style.display = 'none';
    });

    // クリックしたタブにactiveをつける
    tab.classList.add('active');
    // 同じdata-tabのコードを表示
    var target = tab.getAttribute('data-tab');
    document.querySelector('.topGalleryModal__code[data-tab="' + target + '"]').style.display = 'block';
  });
});
document.querySelectorAll('.galleryCard__btn--code').forEach(function (btn) {
  btn.addEventListener('click', function () {
    document.querySelector('.topGalleryModal').classList.add('active');
    document.querySelector('.topGalleryModal__bg').classList.add('active');
  });
});

// モーダルを開く
// モーダルを開く
document.querySelectorAll('.galleryCard__btn--code').forEach(function (btn) {
  btn.addEventListener('click', function () {
    var modal = document.querySelector('.topGalleryModal');
    var bg = document.querySelector('.topGalleryModal__bg');
    modal.classList.remove('closing'); // 念のため外す
    modal.classList.add('active');
    bg.classList.add('active');
  });
});

// モーダルを閉じる
document.querySelectorAll('.topGalleryModal__close, .topGalleryModal__bg').forEach(function (elm) {
  elm.addEventListener('click', function () {
    var modal = document.querySelector('.topGalleryModal');
    var bg = document.querySelector('.topGalleryModal__bg');
    modal.classList.remove('active'); // 開く用クラスを外す
    modal.classList.add('closing'); // 閉じるアニメ用クラスを付ける
    bg.classList.remove('active');
    // アニメーション後に.closingを外す
    setTimeout(function () {
      modal.classList.remove('closing');
      // 必要ならここで display: none; をつけてもOK
    }, 500); // 0.5s → 閉じるアニメの所要時間に合わせる
  });
});
document.addEventListener('DOMContentLoaded', function () {
  var modalSample = document.querySelector('.topGallerySample');
  var scroller = modalSample; // scroll container
  var fadeEls = modalSample.querySelectorAll('.fadeup');

  // IntersectionObserver の設定
  var observer = new IntersectionObserver(function (entries, obs) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
        obs.unobserve(entry.target);
      }
    });
  }, {
    root: scroller,
    threshold: 0.1
  });

  // アニメーション状態をリセットして再監視する関数
  function resetAnimations() {
    fadeEls.forEach(function (el) {
      el.classList.remove('is-visible');
      observer.observe(el);
    });
  }

  // モーダルを開く／閉じるボタン
  document.querySelectorAll('.galleryCard__btn--sample').forEach(function (btn) {
    btn.addEventListener('click', function () {
      var isNowOpen = modalSample.classList.toggle('active');
      document.body.style.overflow = isNowOpen ? 'hidden' : '';
      if (isNowOpen) {
        // 開いた直後にリセット
        modalSample.scrollTop = 0;
        resetAnimations();
      }
    });
  });

  // モーダル内の「閉じる」ボタン
  document.querySelectorAll('.topGallerySample__close').forEach(function (closeBtn) {
    closeBtn.addEventListener('click', function () {
      modalSample.classList.remove('active');
      document.body.style.overflow = '';
      // 閉じたときもリセットしておくと安心
      modalSample.scrollTop = 0;
      resetAnimations();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsialF1ZXJ5Iiwid2luZG93Iiwib24iLCIkIiwid2lkdGgiLCJoZWFkZXJIaWdodCIsImNsaWNrIiwic3BlZWQiLCJocmVmIiwiYXR0ciIsInRhcmdldCIsInBvc2l0aW9uIiwib2Zmc2V0IiwidG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ2aWRlbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5IiwicGF1c2UiLCJjdXJyZW50VGltZSIsImJ0biIsImNvbnNvbGUiLCJsb2ciLCJjb2RlIiwiY2xvc2VzdCIsInF1ZXJ5U2VsZWN0b3IiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJpbm5lclRleHQiLCJ0aGVuIiwic2V0VGltZW91dCIsInRhYiIsInQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjIiwic3R5bGUiLCJkaXNwbGF5IiwiYWRkIiwiZ2V0QXR0cmlidXRlIiwibW9kYWwiLCJiZyIsImVsbSIsIm1vZGFsU2FtcGxlIiwic2Nyb2xsZXIiLCJmYWRlRWxzIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJvYnMiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidW5vYnNlcnZlIiwicm9vdCIsInRocmVzaG9sZCIsInJlc2V0QW5pbWF0aW9ucyIsImVsIiwib2JzZXJ2ZSIsImlzTm93T3BlbiIsInRvZ2dsZSIsImJvZHkiLCJvdmVyZmxvdyIsImNsb3NlQnRuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0FBLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxZQUFZLENBR3BELENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRUo7QUFDQUYsTUFBTSxDQUFDLFVBQVVHLENBQUMsRUFBRTtFQUVsQjtFQUNBOztFQUdBO0VBQ0E7RUFDQSxJQUFJQyxLQUFLLEdBQUdELENBQUMsQ0FBQ0YsTUFBTSxDQUFDLENBQUNHLEtBQUssQ0FBQyxDQUFDO0VBQzdCLElBQUlBLEtBQUssSUFBSSxJQUFJLEVBQUU7SUFDakIsSUFBSUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0VBQ3hCLENBQUMsTUFBTTtJQUNMLElBQUlBLFdBQVcsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUN6QjtFQUVBRixDQUFDLENBQUMsY0FBYyxDQUFDLENBQUNHLEtBQUssQ0FBQyxZQUFZO0lBQ2xDLElBQUlDLEtBQUssR0FBRyxHQUFHO0lBQ2YsSUFBSUMsSUFBSSxHQUFHTCxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUNNLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDL0IsSUFBSUMsTUFBTSxHQUFHUCxDQUFDLENBQUNLLElBQUksSUFBSSxHQUFHLElBQUlBLElBQUksSUFBSSxFQUFFLEdBQUcsTUFBTSxHQUFHQSxJQUFJLENBQUM7SUFDekQsSUFBSUcsUUFBUSxHQUFHRCxNQUFNLENBQUNFLE1BQU0sQ0FBQyxDQUFDLENBQUNDLEdBQUcsR0FBR1IsV0FBVztJQUNoREYsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDVyxPQUFPLENBQUM7TUFDdEJDLFNBQVMsRUFBRUo7SUFDYixDQUFDLEVBQUVKLEtBQUssRUFBRSxPQUFPLENBQUM7SUFDbEIsT0FBTyxLQUFLO0VBQ2QsQ0FBQyxDQUFDO0FBSUosQ0FBQyxDQUFDO0FBQ0Y7O0FBR0FTLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMscUJBQXFCLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFVBQUFDLEtBQUssRUFBSTtFQUNoRTtFQUNBQSxLQUFLLENBQUNDLGdCQUFnQixDQUFDLFlBQVksRUFBRSxZQUFNO0lBQ3pDRCxLQUFLLENBQUNFLElBQUksQ0FBQyxDQUFDO0VBQ2QsQ0FBQyxDQUFDO0VBQ0Y7RUFDQUYsS0FBSyxDQUFDQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsWUFBTTtJQUN6Q0QsS0FBSyxDQUFDRyxLQUFLLENBQUMsQ0FBQztJQUNiSCxLQUFLLENBQUNJLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN6QixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRlAsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFVBQUFNLEdBQUcsRUFBSTtFQUNwREEsR0FBRyxDQUFDSixnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBVztJQUN2Q0ssT0FBTyxDQUFDQyxHQUFHLENBQUMsS0FBSyxDQUFDO0lBQ2xCO0lBQ0EsSUFBTUMsSUFBSSxHQUFHSCxHQUFHLENBQUNJLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDQyxhQUFhLENBQUMsTUFBTSxDQUFDO0lBQzFFLElBQUksQ0FBQ0YsSUFBSSxFQUFFOztJQUVYO0lBQ0FHLFNBQVMsQ0FBQ0MsU0FBUyxDQUFDQyxTQUFTLENBQUNMLElBQUksQ0FBQ00sU0FBUyxDQUFDLENBQUNDLElBQUksQ0FBQyxZQUFNO01BQ3ZEVixHQUFHLENBQUNTLFNBQVMsR0FBRyxTQUFTO01BQ3pCRSxVQUFVLENBQUM7UUFBQSxPQUFNWCxHQUFHLENBQUNTLFNBQVMsR0FBRyxNQUFNO01BQUEsR0FBRSxJQUFJLENBQUM7SUFDaEQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBR0ZqQixRQUFRLENBQUNDLGdCQUFnQixDQUFDLHdCQUF3QixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFBa0IsR0FBRyxFQUFJO0VBQ2pFQSxHQUFHLENBQUNoQixnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBVztJQUN2QztJQUNBSixRQUFRLENBQUNDLGdCQUFnQixDQUFDLHdCQUF3QixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFBbUIsQ0FBQztNQUFBLE9BQUlBLENBQUMsQ0FBQ0MsU0FBUyxDQUFDQyxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQUEsRUFBQztJQUM5RjtJQUNBdkIsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBQXNCLENBQUM7TUFBQSxPQUFJQSxDQUFDLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxHQUFHLE1BQU07SUFBQSxFQUFDOztJQUUxRjtJQUNBTixHQUFHLENBQUNFLFNBQVMsQ0FBQ0ssR0FBRyxDQUFDLFFBQVEsQ0FBQztJQUMzQjtJQUNBLElBQU1qQyxNQUFNLEdBQUcwQixHQUFHLENBQUNRLFlBQVksQ0FBQyxVQUFVLENBQUM7SUFDM0M1QixRQUFRLENBQUNhLGFBQWEsQ0FBQyxtQ0FBbUMsR0FBR25CLE1BQU0sR0FBRyxJQUFJLENBQUMsQ0FBQytCLEtBQUssQ0FBQ0MsT0FBTyxHQUFHLE9BQU87RUFDckcsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBR0YxQixRQUFRLENBQUNDLGdCQUFnQixDQUFDLHlCQUF5QixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFTTSxHQUFHLEVBQUU7RUFDekVBLEdBQUcsQ0FBQ0osZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQVc7SUFDdkNKLFFBQVEsQ0FBQ2EsYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUNTLFNBQVMsQ0FBQ0ssR0FBRyxDQUFDLFFBQVEsQ0FBQztJQUNsRTNCLFFBQVEsQ0FBQ2EsYUFBYSxDQUFDLHNCQUFzQixDQUFDLENBQUNTLFNBQVMsQ0FBQ0ssR0FBRyxDQUFDLFFBQVEsQ0FBQztFQUN4RSxDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7O0FBS0Y7QUFDQTtBQUNBM0IsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBU00sR0FBRyxFQUFFO0VBQ3pFQSxHQUFHLENBQUNKLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFXO0lBQ3ZDLElBQU15QixLQUFLLEdBQUc3QixRQUFRLENBQUNhLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQztJQUN4RCxJQUFNaUIsRUFBRSxHQUFHOUIsUUFBUSxDQUFDYSxhQUFhLENBQUMsc0JBQXNCLENBQUM7SUFDekRnQixLQUFLLENBQUNQLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDbkNNLEtBQUssQ0FBQ1AsU0FBUyxDQUFDSyxHQUFHLENBQUMsUUFBUSxDQUFDO0lBQzdCRyxFQUFFLENBQUNSLFNBQVMsQ0FBQ0ssR0FBRyxDQUFDLFFBQVEsQ0FBQztFQUM1QixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7O0FBRUY7QUFDQTNCLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsK0NBQStDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFVBQVM2QixHQUFHLEVBQUU7RUFDL0ZBLEdBQUcsQ0FBQzNCLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFXO0lBQ3ZDLElBQU15QixLQUFLLEdBQUc3QixRQUFRLENBQUNhLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQztJQUN4RCxJQUFNaUIsRUFBRSxHQUFHOUIsUUFBUSxDQUFDYSxhQUFhLENBQUMsc0JBQXNCLENBQUM7SUFDekRnQixLQUFLLENBQUNQLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQU07SUFDdkNNLEtBQUssQ0FBQ1AsU0FBUyxDQUFDSyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBUTtJQUN2Q0csRUFBRSxDQUFDUixTQUFTLENBQUNDLE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFDN0I7SUFDQUosVUFBVSxDQUFDLFlBQVc7TUFDcEJVLEtBQUssQ0FBQ1AsU0FBUyxDQUFDQyxNQUFNLENBQUMsU0FBUyxDQUFDO01BQ2pDO0lBQ0YsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFNRnZCLFFBQVEsQ0FBQ0ksZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsWUFBTTtFQUNsRCxJQUFNNEIsV0FBVyxHQUFHaEMsUUFBUSxDQUFDYSxhQUFhLENBQUMsbUJBQW1CLENBQUM7RUFDL0QsSUFBTW9CLFFBQVEsR0FBTUQsV0FBVyxDQUFDLENBQWlCO0VBQ2pELElBQU1FLE9BQU8sR0FBT0YsV0FBVyxDQUFDL0IsZ0JBQWdCLENBQUMsU0FBUyxDQUFDOztFQUUzRDtFQUNBLElBQU1rQyxRQUFRLEdBQUcsSUFBSUMsb0JBQW9CLENBQUMsVUFBQ0MsT0FBTyxFQUFFQyxHQUFHLEVBQUs7SUFDMURELE9BQU8sQ0FBQ25DLE9BQU8sQ0FBQyxVQUFBcUMsS0FBSyxFQUFJO01BQ3ZCLElBQUlBLEtBQUssQ0FBQ0MsY0FBYyxFQUFFO1FBQ3hCRCxLQUFLLENBQUM3QyxNQUFNLENBQUM0QixTQUFTLENBQUNLLEdBQUcsQ0FBQyxZQUFZLENBQUM7UUFDeENXLEdBQUcsQ0FBQ0csU0FBUyxDQUFDRixLQUFLLENBQUM3QyxNQUFNLENBQUM7TUFDN0I7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLEVBQUU7SUFDRGdELElBQUksRUFBRVQsUUFBUTtJQUNkVSxTQUFTLEVBQUU7RUFDYixDQUFDLENBQUM7O0VBRUY7RUFDQSxTQUFTQyxlQUFlQSxDQUFBLEVBQUc7SUFDekJWLE9BQU8sQ0FBQ2hDLE9BQU8sQ0FBQyxVQUFBMkMsRUFBRSxFQUFJO01BQ3BCQSxFQUFFLENBQUN2QixTQUFTLENBQUNDLE1BQU0sQ0FBQyxZQUFZLENBQUM7TUFDakNZLFFBQVEsQ0FBQ1csT0FBTyxDQUFDRCxFQUFFLENBQUM7SUFDdEIsQ0FBQyxDQUFDO0VBQ0o7O0VBRUE7RUFDQTdDLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsMkJBQTJCLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFVBQUFNLEdBQUcsRUFBSTtJQUNwRUEsR0FBRyxDQUFDSixnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBTTtNQUNsQyxJQUFNMkMsU0FBUyxHQUFHZixXQUFXLENBQUNWLFNBQVMsQ0FBQzBCLE1BQU0sQ0FBQyxRQUFRLENBQUM7TUFDeERoRCxRQUFRLENBQUNpRCxJQUFJLENBQUN4QixLQUFLLENBQUN5QixRQUFRLEdBQUdILFNBQVMsR0FBRyxRQUFRLEdBQUcsRUFBRTtNQUN4RCxJQUFJQSxTQUFTLEVBQUU7UUFDYjtRQUNBZixXQUFXLENBQUNqQyxTQUFTLEdBQUcsQ0FBQztRQUN6QjZDLGVBQWUsQ0FBQyxDQUFDO01BQ25CO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDOztFQUVGO0VBQ0E1QyxRQUFRLENBQUNDLGdCQUFnQixDQUFDLDBCQUEwQixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFBaUQsUUFBUSxFQUFJO0lBQ3hFQSxRQUFRLENBQUMvQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBTTtNQUN2QzRCLFdBQVcsQ0FBQ1YsU0FBUyxDQUFDQyxNQUFNLENBQUMsUUFBUSxDQUFDO01BQ3RDdkIsUUFBUSxDQUFDaUQsSUFBSSxDQUFDeEIsS0FBSyxDQUFDeUIsUUFBUSxHQUFHLEVBQUU7TUFDakM7TUFDQWxCLFdBQVcsQ0FBQ2pDLFNBQVMsR0FBRyxDQUFDO01BQ3pCNkMsZUFBZSxDQUFDLENBQUM7SUFDbkIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6ImJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzY3JvbGwgY2xhc3MgYWRkXG5qUXVlcnkod2luZG93KS5vbihcImxvYWQgc2Nyb2xsIHJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG5cblxufSk7IC8vIHNjcm9sbCBjbGFzcyBhZGQgRU5EXG5cbi8vIGpRdWVyeSBzdGFydFxualF1ZXJ5KGZ1bmN0aW9uICgkKSB7XG5cbiAgLy8gU1AgMTAwdmgo44K544Kv44Ot44O844Or44OQ44O85a++562WKVxuICAvLyAkKCcubG9hZGluZ0xvZ28nKS5jc3MoJ2hlaWdodCcsJCh3aW5kb3cpLmhlaWdodCgpKTtcblxuXG4gIC8vIFNtb290aCBzY3JvbGxcbiAgLy8g44Oa44O844K45YaF44Oq44Oz44KvXG4gIHZhciB3aWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICBpZiAod2lkdGggPD0gMTAyMykge1xuICAgIHZhciBoZWFkZXJIaWdodCA9IDYwOyAvL+ODmOODg+ODgOOBrumrmOOBlVxuICB9IGVsc2Uge1xuICAgIHZhciBoZWFkZXJIaWdodCA9IDEwMDsgLy/jg5jjg4Pjg4Djga7pq5jjgZVcbiAgfVxuXG4gICQoJ2FbaHJlZl49XCIjXCJdJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBzcGVlZCA9IDgwMDtcbiAgICB2YXIgaHJlZiA9ICQodGhpcykuYXR0cihcImhyZWZcIik7XG4gICAgdmFyIHRhcmdldCA9ICQoaHJlZiA9PSBcIiNcIiB8fCBocmVmID09IFwiXCIgPyAnaHRtbCcgOiBocmVmKTtcbiAgICB2YXIgcG9zaXRpb24gPSB0YXJnZXQub2Zmc2V0KCkudG9wIC0gaGVhZGVySGlnaHQ7XG4gICAgJChcImh0bWwsIGJvZHlcIikuYW5pbWF0ZSh7XG4gICAgICBzY3JvbGxUb3A6IHBvc2l0aW9uXG4gICAgfSwgc3BlZWQsIFwic3dpbmdcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcblxuXG5cbn0pO1xuLy8galF1ZXJ5IEVuZFxuXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5Q2FyZF9fdmlkZW8nKS5mb3JFYWNoKHZpZGVvID0+IHtcbiAgLy8g44Ob44OQ44O86ZaL5aeL44Gn5YaN55Sf77yG44OV44Kj44Or44K/6Kej6ZmkXG4gIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgdmlkZW8ucGxheSgpO1xuICB9KTtcbiAgLy8g44Ob44OQ44O857WC5LqG44Gn5LiA5pmC5YGc5q2i77yG44OV44Kj44Or44K/5oi744GZXG4gIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgdmlkZW8ucGF1c2UoKTtcbiAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7IC8vIOWFiOmgreOBq+aIu+OBmeWgtOWQiFxuICB9KTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29weS1idG4nKS5mb3JFYWNoKGJ0biA9PiB7XG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdhYWEnKVxuICAgIC8vIOKRoCDjg5zjgr/jg7Pjga7opqropoHntKDlhoXjga48Y29kZT7jgpLmjqLjgZlcbiAgICBjb25zdCBjb2RlID0gYnRuLmNsb3Nlc3QoJy50b3BHYWxsZXJ5TW9kYWxfX2RldGFpbCcpLnF1ZXJ5U2VsZWN0b3IoJ2NvZGUnKTtcbiAgICBpZiAoIWNvZGUpIHJldHVybjtcblxuICAgIC8vIOKRoSDjgrPjg5Tjg7xcbiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChjb2RlLmlubmVyVGV4dCkudGhlbigoKSA9PiB7XG4gICAgICBidG4uaW5uZXJUZXh0ID0gJ0NvcGllZCEnO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBidG4uaW5uZXJUZXh0ID0gJ0NvcHknLCAxMjAwKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9wR2FsbGVyeU1vZGFsX19pdGVtJykuZm9yRWFjaCh0YWIgPT4ge1xuICB0YWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAvLyDjgZnjgbnjgabjga7jgr/jg5bjgYvjgolhY3RpdmXjgpLlpJbjgZlcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9wR2FsbGVyeU1vZGFsX19pdGVtJykuZm9yRWFjaCh0ID0+IHQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xuICAgIC8vIOOBmeOBueOBpuOBruOCs+ODvOODieODkeODjeODq+OCkumdnuihqOekuuOBq1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b3BHYWxsZXJ5TW9kYWxfX2NvZGUnKS5mb3JFYWNoKGMgPT4gYy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKTtcbiAgICBcbiAgICAvLyDjgq/jg6rjg4Pjgq/jgZfjgZ/jgr/jg5bjgathY3RpdmXjgpLjgaTjgZHjgotcbiAgICB0YWIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgLy8g5ZCM44GYZGF0YS10YWLjga7jgrPjg7zjg4njgpLooajnpLpcbiAgICBjb25zdCB0YXJnZXQgPSB0YWIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYicpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5TW9kYWxfX2NvZGVbZGF0YS10YWI9XCInICsgdGFyZ2V0ICsgJ1wiXScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9KTtcbn0pO1xuXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5Q2FyZF9fYnRuLS1jb2RlJykuZm9yRWFjaChmdW5jdGlvbihidG4pIHtcbiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5TW9kYWxfX2JnJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH0pO1xufSk7XG5cblxuXG5cbi8vIOODouODvOODgOODq+OCkumWi+OBj1xuLy8g44Oi44O844OA44Or44KS6ZaL44GPXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeUNhcmRfX2J0bi0tY29kZScpLmZvckVhY2goZnVuY3Rpb24oYnRuKSB7XG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbCcpO1xuICAgIGNvbnN0IGJnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbF9fYmcnKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdjbG9zaW5nJyk7IC8vIOW/teOBruOBn+OCgeWkluOBmVxuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIGJnLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICB9KTtcbn0pO1xuXG4vLyDjg6Ljg7zjg4Djg6vjgpLplonjgZjjgotcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b3BHYWxsZXJ5TW9kYWxfX2Nsb3NlLCAudG9wR2FsbGVyeU1vZGFsX19iZycpLmZvckVhY2goZnVuY3Rpb24oZWxtKSB7XG4gIGVsbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbCcpO1xuICAgIGNvbnN0IGJnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbF9fYmcnKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsgICAgICAvLyDplovjgY/nlKjjgq/jg6njgrnjgpLlpJbjgZlcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdjbG9zaW5nJyk7ICAgICAgICAvLyDplonjgZjjgovjgqLjg4vjg6HnlKjjgq/jg6njgrnjgpLku5jjgZHjgotcbiAgICBiZy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAvLyDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PlvozjgasuY2xvc2luZ+OCkuWkluOBmVxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdjbG9zaW5nJyk7XG4gICAgICAvLyDlv4XopoHjgarjgonjgZPjgZPjgacgZGlzcGxheTogbm9uZTsg44KS44Gk44GR44Gm44KCT0tcbiAgICB9LCA1MDApOyAvLyAwLjVzIOKGkiDplonjgZjjgovjgqLjg4vjg6Hjga7miYDopoHmmYLplpPjgavlkIjjgo/jgZvjgotcbiAgfSk7XG59KTtcblxuXG5cblxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCBtb2RhbFNhbXBsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5U2FtcGxlJyk7XG4gIGNvbnN0IHNjcm9sbGVyICAgID0gbW9kYWxTYW1wbGU7ICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgY29udGFpbmVyXG4gIGNvbnN0IGZhZGVFbHMgICAgID0gbW9kYWxTYW1wbGUucXVlcnlTZWxlY3RvckFsbCgnLmZhZGV1cCcpO1xuXG4gIC8vIEludGVyc2VjdGlvbk9ic2VydmVyIOOBruioreWumlxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcywgb2JzKSA9PiB7XG4gICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpO1xuICAgICAgICBvYnMudW5vYnNlcnZlKGVudHJ5LnRhcmdldCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIHtcbiAgICByb290OiBzY3JvbGxlcixcbiAgICB0aHJlc2hvbGQ6IDAuMVxuICB9KTtcblxuICAvLyDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PnirbmhYvjgpLjg6rjgrvjg4Pjg4jjgZfjgablho3nm6PoppbjgZnjgovplqLmlbBcbiAgZnVuY3Rpb24gcmVzZXRBbmltYXRpb25zKCkge1xuICAgIGZhZGVFbHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy12aXNpYmxlJyk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKGVsKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOODouODvOODgOODq+OCkumWi+OBj++8j+mWieOBmOOCi+ODnOOCv+ODs1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeUNhcmRfX2J0bi0tc2FtcGxlJykuZm9yRWFjaChidG4gPT4ge1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGlzTm93T3BlbiA9IG1vZGFsU2FtcGxlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IGlzTm93T3BlbiA/ICdoaWRkZW4nIDogJyc7XG4gICAgICBpZiAoaXNOb3dPcGVuKSB7XG4gICAgICAgIC8vIOmWi+OBhOOBn+ebtOW+jOOBq+ODquOCu+ODg+ODiFxuICAgICAgICBtb2RhbFNhbXBsZS5zY3JvbGxUb3AgPSAwO1xuICAgICAgICByZXNldEFuaW1hdGlvbnMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8g44Oi44O844OA44Or5YaF44Gu44CM6ZaJ44GY44KL44CN44Oc44K/44OzXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b3BHYWxsZXJ5U2FtcGxlX19jbG9zZScpLmZvckVhY2goY2xvc2VCdG4gPT4ge1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbW9kYWxTYW1wbGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICAvLyDplonjgZjjgZ/jgajjgY3jgoLjg6rjgrvjg4Pjg4jjgZfjgabjgYrjgY/jgajlronlv4NcbiAgICAgIG1vZGFsU2FtcGxlLnNjcm9sbFRvcCA9IDA7XG4gICAgICByZXNldEFuaW1hdGlvbnMoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==
