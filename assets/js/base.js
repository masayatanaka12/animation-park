"use strict";

// scroll class add
jQuery(window).on("load scroll resize", function () {}); // scroll class add END

// jQuery start
jQuery(function ($) {
  // SP 100vh(スクロールバー対策)
  // $('.loadingLogo').css('height',$(window).height());

  // Smooth scroll
  // ページ内リンク
  var width = $(window).width();
  if (width <= 1023) {
    var headerHight = 60; //ヘッダの高さ
  } else {
    var headerHight = 100; //ヘッダの高さ
  }
  $('a[href^="#"]').click(function () {
    var speed = 800;
    var href = $(this).attr("href");
    var target = $(href == "#" || href == "" ? 'html' : href);
    var position = target.offset().top - headerHight;
    $("html, body").animate({
      scrollTop: position
    }, speed, "swing");
    return false;
  });
});
// jQuery End

// 1. 全てのラッパー要素を取得
document.addEventListener('DOMContentLoaded', function () {
  var wrappers = document.querySelectorAll('.galleryCard__videoWrap');
  wrappers.forEach(function (wrap) {
    var video = wrap.querySelector('video');
    var img = wrap.querySelector('.galleryModal__img');

    // video または img が見つからなければスキップ
    if (!video || !img) return;
    wrap.addEventListener('mouseenter', function () {
      img.style.display = 'none';
      video.play();
    });
    wrap.addEventListener('mouseleave', function () {
      video.pause();
      video.currentTime = 0;
      img.style.display = ''; // 必要に応じて 'block' などを指定
    });
  });
});

// ▼ Playボタンを押したら先頭から再生（SP向けも含む）

document.querySelectorAll('.galleryModal__play').forEach(function (button) {
  var container = button.parentElement; // .galleryModal__videoContent
  var video = container.querySelector('.js-video');
  var img = container.querySelector('.galleryModal__img');
  if (!video) return;
  button.addEventListener('click', function () {
    // 画像を非表示にする
    if (img) {
      img.style.display = 'none';
    }

    // 動画を先頭に戻して再生
    video.currentTime = 0;
    video.play();
  });
});
document.querySelectorAll('.galleryCard__play').forEach(function (button) {
  var container = button.parentElement; // .galleryModal__videoContent
  var video = container.querySelector('.js-video');
  var img = container.querySelector('.galleryModal__img');
  if (!video) return;
  button.addEventListener('click', function () {
    // 画像を非表示にする
    if (img) {
      img.style.display = 'none';
    }

    // 動画を先頭に戻して再生
    video.currentTime = 0;
    video.play();
  });
});
document.querySelectorAll('.copy-btn').forEach(function (btn) {
  btn.addEventListener('click', function () {
    // ① ボタンの親要素内の<code>を探す
    var code = btn.closest('.topGalleryModal__detail').querySelector('code');
    if (!code) return;

    // ② コピー
    navigator.clipboard.writeText(code.innerText).then(function () {
      btn.innerText = 'Copied!';
      setTimeout(function () {
        return btn.innerText = 'Copy';
      }, 1200);
    });
  });
});
document.querySelectorAll('.topGalleryModal__item').forEach(function (tab) {
  tab.addEventListener('click', function () {
    // すべてのタブからactiveを外す
    document.querySelectorAll('.topGalleryModal__item').forEach(function (t) {
      return t.classList.remove('active');
    });
    // すべてのコードパネルを非表示に
    document.querySelectorAll('.topGalleryModal__code').forEach(function (c) {
      return c.style.display = 'none';
    });

    // クリックしたタブにactiveをつける
    tab.classList.add('active');
    // 同じdata-tabのコードを表示
    var target = tab.getAttribute('data-tab');
    document.querySelector('.topGalleryModal__code[data-tab="' + target + '"]').style.display = 'block';
  });
});
document.querySelectorAll('.galleryCard__btn--code').forEach(function (btn) {
  btn.addEventListener('click', function () {
    document.querySelector('.topGalleryModal').classList.add('active');
    document.querySelector('.topGalleryModal__bg').classList.add('active');
  });
});

// モーダルを開く
// モーダルを開く
document.querySelectorAll('.galleryCard__btn--code').forEach(function (btn) {
  btn.addEventListener('click', function () {
    var modal = document.querySelector('.topGalleryModal');
    var bg = document.querySelector('.topGalleryModal__bg');
    modal.classList.remove('closing'); // 念のため外す
    modal.classList.add('active');
    bg.classList.add('active');
  });
});

// モーダルを閉じる
// topGalleryModal を閉じる際にスクロール位置をリセットする
// topGalleryModal を閉じる際に 0.5 秒後に wrapper.scrollTop = 0 を実行する
document.querySelectorAll('.topGalleryModal__close, .topGalleryModal__bg').forEach(function (elm) {
  elm.addEventListener('click', function () {
    var modal = document.querySelector('.topGalleryModal');
    var wrapper = modal.querySelector('.topGalleryModal__wrapper');
    var bg = document.querySelector('.topGalleryModal__bg');

    // モーダルを閉じるクラス操作
    modal.classList.remove('active'); // 開く用クラスを外す
    modal.classList.add('closing'); // 閉じるアニメ用クラスを付ける
    bg.classList.remove('active');

    // 0.5秒後にスクロール位置をリセットし、closing クラスを外す
    setTimeout(function () {
      if (wrapper) {
        wrapper.scrollTop = 0;
      }
      modal.classList.remove('closing');
      // 必要ならここで display: none; をつけてもOK
    }, 500); // 0.5s → 閉じるアニメーションの所要時間に合わせる
  });
});
document.addEventListener('DOMContentLoaded', function () {
  var modalSample = document.querySelector('.topGallerySample');
  var scroller = modalSample; // scroll container

  // IntersectionObserver の設定
  var observer = new IntersectionObserver(function (entries, obs) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
        obs.unobserve(entry.target);
      }
    });
  }, {
    root: scroller,
    threshold: 0.1
  });

  // アニメーション状態をリセットして再監視する関数
  function resetAnimations() {
    fadeEls.forEach(function (el) {
      el.classList.remove('is-visible');
      observer.observe(el);
    });
  }

  // モーダルを開く／閉じるボタン
  document.querySelectorAll('.galleryCard__btn--sample').forEach(function (btn) {
    btn.addEventListener('click', function () {
      var isNowOpen = modalSample.classList.toggle('active');
      document.body.style.overflow = isNowOpen ? 'hidden' : '';
      if (isNowOpen) {
        // 開いた直後にリセット
        modalSample.scrollTop = 0;
        resetAnimations();
      }
    });
  });

  // モーダル内の「閉じる」ボタン
  document.querySelectorAll('.topGallerySample__close').forEach(function (closeBtn) {
    closeBtn.addEventListener('click', function () {
      modalSample.classList.remove('active');
      document.body.style.overflow = '';
      // 閉じたときもリセットしておくと安心
      modalSample.scrollTop = 0;
      resetAnimations();
    });
  });
});
document.addEventListener('DOMContentLoaded', function () {
  var options = {
    root: null,
    rootMargin: '0px',
    threshold: 0.3
  };
  var callback = function callback(entries, observer) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('js-mask-animation');
        observer.unobserve(entry.target);
      }
    });
  };
  var observer = new IntersectionObserver(callback, options);
  document.querySelectorAll('.sample01__img').forEach(function (elm) {
    observer.observe(elm);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsialF1ZXJ5Iiwid2luZG93Iiwib24iLCIkIiwid2lkdGgiLCJoZWFkZXJIaWdodCIsImNsaWNrIiwic3BlZWQiLCJocmVmIiwiYXR0ciIsInRhcmdldCIsInBvc2l0aW9uIiwib2Zmc2V0IiwidG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIndyYXBwZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ3cmFwIiwidmlkZW8iLCJxdWVyeVNlbGVjdG9yIiwiaW1nIiwic3R5bGUiLCJkaXNwbGF5IiwicGxheSIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJidXR0b24iLCJjb250YWluZXIiLCJwYXJlbnRFbGVtZW50IiwiYnRuIiwiY29kZSIsImNsb3Nlc3QiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJpbm5lclRleHQiLCJ0aGVuIiwic2V0VGltZW91dCIsInRhYiIsInQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjIiwiYWRkIiwiZ2V0QXR0cmlidXRlIiwibW9kYWwiLCJiZyIsImVsbSIsIndyYXBwZXIiLCJtb2RhbFNhbXBsZSIsInNjcm9sbGVyIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJvYnMiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidW5vYnNlcnZlIiwicm9vdCIsInRocmVzaG9sZCIsInJlc2V0QW5pbWF0aW9ucyIsImZhZGVFbHMiLCJlbCIsIm9ic2VydmUiLCJpc05vd09wZW4iLCJ0b2dnbGUiLCJib2R5Iiwib3ZlcmZsb3ciLCJjbG9zZUJ0biIsIm9wdGlvbnMiLCJyb290TWFyZ2luIiwiY2FsbGJhY2siXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQUEsTUFBTSxDQUFDQyxNQUFNLENBQUMsQ0FBQ0MsRUFBRSxDQUFDLG9CQUFvQixFQUFFLFlBQVksQ0FHcEQsQ0FBQyxDQUFD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O0FBQ0osQ0FBQyxDQUFDO0FBSUZoRCxRQUFRLENBQUNDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLFlBQU07RUFDbEQsSUFBTXdELE9BQU8sR0FBRztJQUNkWCxJQUFJLEVBQUUsSUFBSTtJQUNWWSxVQUFVLEVBQUUsS0FBSztJQUNqQlgsU0FBUyxFQUFFO0VBQ2IsQ0FBQztFQUVELElBQU1ZLFFBQVEsR0FBRyxTQUFYQSxRQUFRQSxDQUFJbEIsT0FBTyxFQUFFRixRQUFRLEVBQUs7SUFDdENFLE9BQU8sQ0FBQ3JDLE9BQU8sQ0FBQyxVQUFBdUMsS0FBSyxFQUFJO01BQ3ZCLElBQUlBLEtBQUssQ0FBQ0MsY0FBYyxFQUFFO1FBQ3hCRCxLQUFLLENBQUNqRCxNQUFNLENBQUNrQyxTQUFTLENBQUNHLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQztRQUMvQ1EsUUFBUSxDQUFDTSxTQUFTLENBQUNGLEtBQUssQ0FBQ2pELE1BQU0sQ0FBQztNQUNsQztJQUNGLENBQUMsQ0FBQztFQUNKLENBQUM7RUFFRCxJQUFNNkMsUUFBUSxHQUFHLElBQUlDLG9CQUFvQixDQUFDbUIsUUFBUSxFQUFFRixPQUFPLENBQUM7RUFFNUR6RCxRQUFRLENBQUNHLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFBK0IsR0FBRyxFQUFJO0lBQ3pESSxRQUFRLENBQUNZLE9BQU8sQ0FBQ2hCLEdBQUcsQ0FBQztFQUN2QixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJmaWxlIjoiYmFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHNjcm9sbCBjbGFzcyBhZGRcbmpRdWVyeSh3aW5kb3cpLm9uKFwibG9hZCBzY3JvbGwgcmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcblxuXG59KTsgLy8gc2Nyb2xsIGNsYXNzIGFkZCBFTkRcblxuLy8galF1ZXJ5IHN0YXJ0XG5qUXVlcnkoZnVuY3Rpb24gKCQpIHtcblxuICAvLyBTUCAxMDB2aCjjgrnjgq/jg63jg7zjg6vjg5Djg7zlr77nrZYpXG4gIC8vICQoJy5sb2FkaW5nTG9nbycpLmNzcygnaGVpZ2h0JywkKHdpbmRvdykuaGVpZ2h0KCkpO1xuXG5cbiAgLy8gU21vb3RoIHNjcm9sbFxuICAvLyDjg5rjg7zjgrjlhoXjg6rjg7Pjgq9cbiAgdmFyIHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gIGlmICh3aWR0aCA8PSAxMDIzKSB7XG4gICAgdmFyIGhlYWRlckhpZ2h0ID0gNjA7IC8v44OY44OD44OA44Gu6auY44GVXG4gIH0gZWxzZSB7XG4gICAgdmFyIGhlYWRlckhpZ2h0ID0gMTAwOyAvL+ODmOODg+ODgOOBrumrmOOBlVxuICB9XG5cbiAgJCgnYVtocmVmXj1cIiNcIl0nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNwZWVkID0gODAwO1xuICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcbiAgICB2YXIgdGFyZ2V0ID0gJChocmVmID09IFwiI1wiIHx8IGhyZWYgPT0gXCJcIiA/ICdodG1sJyA6IGhyZWYpO1xuICAgIHZhciBwb3NpdGlvbiA9IHRhcmdldC5vZmZzZXQoKS50b3AgLSBoZWFkZXJIaWdodDtcbiAgICAkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHtcbiAgICAgIHNjcm9sbFRvcDogcG9zaXRpb25cbiAgICB9LCBzcGVlZCwgXCJzd2luZ1wiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuXG5cblxufSk7XG4vLyBqUXVlcnkgRW5kXG5cblxuLy8gMS4g5YWo44Gm44Gu44Op44OD44OR44O86KaB57Sg44KS5Y+W5b6XXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCB3cmFwcGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5Q2FyZF9fdmlkZW9XcmFwJyk7XG5cbiAgd3JhcHBlcnMuZm9yRWFjaCh3cmFwID0+IHtcbiAgICBjb25zdCB2aWRlbyA9IHdyYXAucXVlcnlTZWxlY3RvcigndmlkZW8nKTtcbiAgICBjb25zdCBpbWcgICA9IHdyYXAucXVlcnlTZWxlY3RvcignLmdhbGxlcnlNb2RhbF9faW1nJyk7XG5cbiAgICAvLyB2aWRlbyDjgb7jgZ/jga8gaW1nIOOBjOimi+OBpOOBi+OCieOBquOBkeOCjOOBsOOCueOCreODg+ODl1xuICAgIGlmICghdmlkZW8gfHwgIWltZykgcmV0dXJuO1xuXG4gICAgd3JhcC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB2aWRlby5wbGF5KCk7XG4gICAgfSk7XG5cbiAgICB3cmFwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICB2aWRlby5wYXVzZSgpO1xuICAgICAgdmlkZW8uY3VycmVudFRpbWUgPSAwO1xuICAgICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnJzsgLy8g5b+F6KaB44Gr5b+c44GY44GmICdibG9jaycg44Gq44Gp44KS5oyH5a6aXG4gICAgfSk7XG4gIH0pO1xufSk7XG5cblxuICAvLyDilrwgUGxheeODnOOCv+ODs+OCkuaKvOOBl+OBn+OCieWFiOmgreOBi+OCieWGjeeUn++8iFNQ5ZCR44GR44KC5ZCr44KA77yJXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5TW9kYWxfX3BsYXknKS5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50OyAvLyAuZ2FsbGVyeU1vZGFsX192aWRlb0NvbnRlbnRcbiAgY29uc3QgdmlkZW8gICAgID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5qcy12aWRlbycpO1xuICBjb25zdCBpbWcgICAgICAgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmdhbGxlcnlNb2RhbF9faW1nJyk7XG4gIGlmICghdmlkZW8pIHJldHVybjtcblxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgLy8g55S75YOP44KS6Z2e6KGo56S644Gr44GZ44KLXG4gICAgaWYgKGltZykge1xuICAgICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgLy8g5YuV55S744KS5YWI6aCt44Gr5oi744GX44Gm5YaN55SfXG4gICAgdmlkZW8uY3VycmVudFRpbWUgPSAwO1xuICAgIHZpZGVvLnBsYXkoKTtcbiAgfSk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbGxlcnlDYXJkX19wbGF5JykuZm9yRWFjaChidXR0b24gPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBidXR0b24ucGFyZW50RWxlbWVudDsgLy8gLmdhbGxlcnlNb2RhbF9fdmlkZW9Db250ZW50XG4gIGNvbnN0IHZpZGVvICAgICA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuanMtdmlkZW8nKTtcbiAgY29uc3QgaW1nICAgICAgID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5TW9kYWxfX2ltZycpO1xuICBpZiAoIXZpZGVvKSByZXR1cm47XG5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIC8vIOeUu+WDj+OCkumdnuihqOekuuOBq+OBmeOCi1xuICAgIGlmIChpbWcpIHtcbiAgICAgIGltZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cblxuICAgIC8vIOWLleeUu+OCkuWFiOmgreOBq+aIu+OBl+OBpuWGjeeUn1xuICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gMDtcbiAgICB2aWRlby5wbGF5KCk7XG4gIH0pO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb3B5LWJ0bicpLmZvckVhY2goYnRuID0+IHtcbiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgLy8g4pGgIOODnOOCv+ODs+OBruimquimgee0oOWGheOBrjxjb2RlPuOCkuaOouOBmVxuICAgIGNvbnN0IGNvZGUgPSBidG4uY2xvc2VzdCgnLnRvcEdhbGxlcnlNb2RhbF9fZGV0YWlsJykucXVlcnlTZWxlY3RvcignY29kZScpO1xuICAgIGlmICghY29kZSkgcmV0dXJuO1xuXG4gICAgLy8g4pGhIOOCs+ODlOODvFxuICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGNvZGUuaW5uZXJUZXh0KS50aGVuKCgpID0+IHtcbiAgICAgIGJ0bi5pbm5lclRleHQgPSAnQ29waWVkISc7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IGJ0bi5pbm5lclRleHQgPSAnQ29weScsIDEyMDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5cblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvcEdhbGxlcnlNb2RhbF9faXRlbScpLmZvckVhY2godGFiID0+IHtcbiAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgLy8g44GZ44G544Gm44Gu44K/44OW44GL44KJYWN0aXZl44KS5aSW44GZXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvcEdhbGxlcnlNb2RhbF9faXRlbScpLmZvckVhY2godCA9PiB0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcbiAgICAvLyDjgZnjgbnjgabjga7jgrPjg7zjg4njg5Hjg43jg6vjgpLpnZ7ooajnpLrjgatcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9wR2FsbGVyeU1vZGFsX19jb2RlJykuZm9yRWFjaChjID0+IGMuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7XG4gICAgXG4gICAgLy8g44Kv44Oq44OD44Kv44GX44Gf44K/44OW44GrYWN0aXZl44KS44Gk44GR44KLXG4gICAgdGFiLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIC8vIOWQjOOBmGRhdGEtdGFi44Gu44Kz44O844OJ44KS6KGo56S6XG4gICAgY29uc3QgdGFyZ2V0ID0gdGFiLmdldEF0dHJpYnV0ZSgnZGF0YS10YWInKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wR2FsbGVyeU1vZGFsX19jb2RlW2RhdGEtdGFiPVwiJyArIHRhcmdldCArICdcIl0nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfSk7XG59KTtcblxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeUNhcmRfX2J0bi0tY29kZScpLmZvckVhY2goZnVuY3Rpb24oYnRuKSB7XG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5TW9kYWwnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wR2FsbGVyeU1vZGFsX19iZycpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICB9KTtcbn0pO1xuXG5cblxuXG4vLyDjg6Ljg7zjg4Djg6vjgpLplovjgY9cbi8vIOODouODvOODgOODq+OCkumWi+OBj1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbGxlcnlDYXJkX19idG4tLWNvZGUnKS5mb3JFYWNoKGZ1bmN0aW9uKGJ0bikge1xuICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5TW9kYWwnKTtcbiAgICBjb25zdCBiZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5TW9kYWxfX2JnJyk7XG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnY2xvc2luZycpOyAvLyDlv7Xjga7jgZ/jgoHlpJbjgZlcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICBiZy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfSk7XG59KTtcblxuLy8g44Oi44O844OA44Or44KS6ZaJ44GY44KLXG4vLyB0b3BHYWxsZXJ5TW9kYWwg44KS6ZaJ44GY44KL6Zqb44Gr44K544Kv44Ot44O844Or5L2N572u44KS44Oq44K744OD44OI44GZ44KLXG4vLyB0b3BHYWxsZXJ5TW9kYWwg44KS6ZaJ44GY44KL6Zqb44GrIDAuNSDnp5Llvozjgasgd3JhcHBlci5zY3JvbGxUb3AgPSAwIOOCkuWun+ihjOOBmeOCi1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvcEdhbGxlcnlNb2RhbF9fY2xvc2UsIC50b3BHYWxsZXJ5TW9kYWxfX2JnJykuZm9yRWFjaChmdW5jdGlvbihlbG0pIHtcbiAgZWxtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgbW9kYWwgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5TW9kYWwnKTtcbiAgICBjb25zdCB3cmFwcGVyID0gbW9kYWwucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbF9fd3JhcHBlcicpO1xuICAgIGNvbnN0IGJnICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wR2FsbGVyeU1vZGFsX19iZycpO1xuXG4gICAgLy8g44Oi44O844OA44Or44KS6ZaJ44GY44KL44Kv44Op44K55pON5L2cXG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7ICAgLy8g6ZaL44GP55So44Kv44Op44K544KS5aSW44GZXG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnY2xvc2luZycpOyAgICAgLy8g6ZaJ44GY44KL44Ki44OL44Oh55So44Kv44Op44K544KS5LuY44GR44KLXG4gICAgYmcuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cbiAgICAvLyAwLjXnp5Llvozjgavjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLjg6rjgrvjg4Pjg4jjgZfjgIFjbG9zaW5nIOOCr+ODqeOCueOCkuWkluOBmVxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAod3JhcHBlcikge1xuICAgICAgICB3cmFwcGVyLnNjcm9sbFRvcCA9IDA7XG4gICAgICB9XG4gICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdjbG9zaW5nJyk7XG4gICAgICAvLyDlv4XopoHjgarjgonjgZPjgZPjgacgZGlzcGxheTogbm9uZTsg44KS44Gk44GR44Gm44KCT0tcbiAgICB9LCA1MDApOyAvLyAwLjVzIOKGkiDplonjgZjjgovjgqLjg4vjg6Hjg7zjgrfjg6fjg7Pjga7miYDopoHmmYLplpPjgavlkIjjgo/jgZvjgotcbiAgfSk7XG59KTtcblxuXG5cblxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCBtb2RhbFNhbXBsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5U2FtcGxlJyk7XG4gIGNvbnN0IHNjcm9sbGVyICAgID0gbW9kYWxTYW1wbGU7ICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgY29udGFpbmVyXG5cbiAgLy8gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIg44Gu6Kit5a6aXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzLCBvYnMpID0+IHtcbiAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdpcy12aXNpYmxlJyk7XG4gICAgICAgIG9icy51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwge1xuICAgIHJvb3Q6IHNjcm9sbGVyLFxuICAgIHRocmVzaG9sZDogMC4xXG4gIH0pO1xuXG4gIC8vIOOCouODi+ODoeODvOOCt+ODp+ODs+eKtuaFi+OCkuODquOCu+ODg+ODiOOBl+OBpuWGjeebo+imluOBmeOCi+mWouaVsFxuICBmdW5jdGlvbiByZXNldEFuaW1hdGlvbnMoKSB7XG4gICAgZmFkZUVscy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZpc2libGUnKTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUoZWwpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g44Oi44O844OA44Or44KS6ZaL44GP77yP6ZaJ44GY44KL44Oc44K/44OzXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5Q2FyZF9fYnRuLS1zYW1wbGUnKS5mb3JFYWNoKGJ0biA9PiB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgaXNOb3dPcGVuID0gbW9kYWxTYW1wbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gaXNOb3dPcGVuID8gJ2hpZGRlbicgOiAnJztcbiAgICAgIGlmIChpc05vd09wZW4pIHtcbiAgICAgICAgLy8g6ZaL44GE44Gf55u05b6M44Gr44Oq44K744OD44OIXG4gICAgICAgIG1vZGFsU2FtcGxlLnNjcm9sbFRvcCA9IDA7XG4gICAgICAgIHJlc2V0QW5pbWF0aW9ucygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyDjg6Ljg7zjg4Djg6vlhoXjga7jgIzplonjgZjjgovjgI3jg5zjgr/jg7NcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvcEdhbGxlcnlTYW1wbGVfX2Nsb3NlJykuZm9yRWFjaChjbG9zZUJ0biA9PiB7XG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb2RhbFNhbXBsZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgIC8vIOmWieOBmOOBn+OBqOOBjeOCguODquOCu+ODg+ODiOOBl+OBpuOBiuOBj+OBqOWuieW/g1xuICAgICAgbW9kYWxTYW1wbGUuc2Nyb2xsVG9wID0gMDtcbiAgICAgIHJlc2V0QW5pbWF0aW9ucygpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICByb290OiBudWxsLFxuICAgIHJvb3RNYXJnaW46ICcwcHgnLFxuICAgIHRocmVzaG9sZDogMC4zXG4gIH07XG5cbiAgY29uc3QgY2FsbGJhY2sgPSAoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcbiAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdqcy1tYXNrLWFuaW1hdGlvbicpO1xuICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihjYWxsYmFjaywgb3B0aW9ucyk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNhbXBsZTAxX19pbWcnKS5mb3JFYWNoKGVsbSA9PiB7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbG0pO1xuICB9KTtcbn0pO1xuXG4iXX0=
