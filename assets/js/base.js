"use strict";

// scroll class add
jQuery(window).on("load scroll resize", function () {}); // scroll class add END

// jQuery start
jQuery(function ($) {
  // SP 100vh(スクロールバー対策)
  // $('.loadingLogo').css('height',$(window).height());

  // Smooth scroll
  // ページ内リンク
  var width = $(window).width();
  if (width <= 1023) {
    var headerHight = 60; //ヘッダの高さ
  } else {
    var headerHight = 100; //ヘッダの高さ
  }
  $('a[href^="#"]').click(function () {
    var speed = 800;
    var href = $(this).attr("href");
    var target = $(href == "#" || href == "" ? 'html' : href);
    var position = target.offset().top - headerHight;
    $("html, body").animate({
      scrollTop: position
    }, speed, "swing");
    return false;
  });
});
// jQuery End

// 1. 全てのラッパー要素を取得
document.addEventListener('DOMContentLoaded', function () {
  var wrappers = document.querySelectorAll('.galleryCard__videoWrap');
  wrappers.forEach(function (wrap) {
    var video = wrap.querySelector('video');
    var img = wrap.querySelector('.galleryModal__img');

    // video または img が見つからなければスキップ
    if (!video || !img) return;
    wrap.addEventListener('mouseenter', function () {
      img.style.display = 'none';
      video.play();
    });
    wrap.addEventListener('mouseleave', function () {
      video.pause();
      video.currentTime = 0;
      img.style.display = ''; // 必要に応じて 'block' などを指定
    });
  });
});
document.addEventListener('DOMContentLoaded', function () {
  var wrappers = document.querySelectorAll('.galleryModal__videoWrap');
  wrappers.forEach(function (wrap) {
    var video = wrap.querySelector('video');
    var img = wrap.querySelector('.galleryModal__img');

    // video または img が見つからなければスキップ
    if (!video || !img) return;
    wrap.addEventListener('mouseenter', function () {
      img.style.display = 'none';
      video.play();
    });
    wrap.addEventListener('mouseleave', function () {
      video.pause();
      video.currentTime = 0;
      img.style.display = ''; // 必要に応じて 'block' などを指定
    });
  });
});

// ▼ Playボタンを押したら先頭から再生（SP向けも含む）

document.querySelectorAll('.galleryModal__play').forEach(function (button) {
  var container = button.parentElement; // .galleryModal__videoContent
  var video = container.querySelector('.js-video');
  var img = container.querySelector('.galleryModal__img');
  if (!video) return;
  button.addEventListener('click', function () {
    // 画像を非表示にする
    if (img) {
      img.style.display = 'none';
    }

    // 動画を先頭に戻して再生
    video.currentTime = 0;
    video.play();
  });
});
document.querySelectorAll('.galleryCard__play').forEach(function (button) {
  var container = button.parentElement; // .galleryModal__videoContent
  var video = container.querySelector('.js-video');
  var img = container.querySelector('.galleryModal__img');
  if (!video) return;
  button.addEventListener('click', function () {
    // 画像を非表示にする
    if (img) {
      img.style.display = 'none';
    }

    // 動画を先頭に戻して再生
    video.currentTime = 0;
    video.play();
  });
});
document.querySelectorAll('.copy-btn').forEach(function (btn) {
  btn.addEventListener('click', function () {
    // ① ボタンの親要素内の<code>を探す
    var code = btn.closest('.topGalleryModal__detail').querySelector('code');
    if (!code) return;

    // ② コピー
    navigator.clipboard.writeText(code.innerText).then(function () {
      btn.innerText = 'Copied!';
      setTimeout(function () {
        return btn.innerText = 'Copy';
      }, 1200);
    });
  });
});
document.querySelectorAll('.topGalleryModal__item').forEach(function (tab) {
  tab.addEventListener('click', function () {
    // すべてのタブからactiveを外す
    document.querySelectorAll('.topGalleryModal__item').forEach(function (t) {
      return t.classList.remove('active');
    });
    // すべてのコードパネルを非表示に
    document.querySelectorAll('.topGalleryModal__code').forEach(function (c) {
      return c.style.display = 'none';
    });

    // クリックしたタブにactiveをつける
    tab.classList.add('active');
    // 同じdata-tabのコードを表示
    var target = tab.getAttribute('data-tab');
    document.querySelector('.topGalleryModal__code[data-tab="' + target + '"]').style.display = 'block';
  });
});
document.querySelectorAll('.galleryCard__btn--code').forEach(function (btn) {
  btn.addEventListener('click', function () {
    document.querySelector('.topGalleryModal').classList.add('active');
    document.querySelector('.topGalleryModal__bg').classList.add('active');
  });
});

// モーダルを開く
// モーダルを開く
document.querySelectorAll('.galleryCard__btn--code').forEach(function (btn) {
  btn.addEventListener('click', function () {
    var modal = document.querySelector('.topGalleryModal');
    var bg = document.querySelector('.topGalleryModal__bg');
    modal.classList.remove('closing'); // 念のため外す
    modal.classList.add('active');
    bg.classList.add('active');
  });
});

// モーダルを閉じる
// topGalleryModal を閉じる際にスクロール位置をリセットする
// topGalleryModal を閉じる際に 0.5 秒後に wrapper.scrollTop = 0 を実行する
document.querySelectorAll('.topGalleryModal__close, .topGalleryModal__bg').forEach(function (elm) {
  elm.addEventListener('click', function () {
    var modal = document.querySelector('.topGalleryModal');
    var wrapper = modal.querySelector('.topGalleryModal__wrapper');
    var bg = document.querySelector('.topGalleryModal__bg');

    // モーダルを閉じるクラス操作
    modal.classList.remove('active'); // 開く用クラスを外す
    modal.classList.add('closing'); // 閉じるアニメ用クラスを付ける
    bg.classList.remove('active');

    // 0.5秒後にスクロール位置をリセットし、closing クラスを外す
    setTimeout(function () {
      if (wrapper) {
        wrapper.scrollTop = 0;
      }
      modal.classList.remove('closing');
      // 必要ならここで display: none; をつけてもOK
    }, 500); // 0.5s → 閉じるアニメーションの所要時間に合わせる
  });
});
document.addEventListener('DOMContentLoaded', function () {
  var modalSample = document.querySelector('.topGallerySample');
  var scroller = modalSample; // scroll container

  // IntersectionObserver の設定
  var observer = new IntersectionObserver(function (entries, obs) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
        obs.unobserve(entry.target);
      }
    });
  }, {
    root: scroller,
    threshold: 0.1
  });

  // アニメーション状態をリセットして再監視する関数
  function resetAnimations() {
    fadeEls.forEach(function (el) {
      el.classList.remove('is-visible');
      observer.observe(el);
    });
  }

  // モーダルを開く／閉じるボタン
  document.querySelectorAll('.galleryCard__btn--sample').forEach(function (btn) {
    btn.addEventListener('click', function () {
      var isNowOpen = modalSample.classList.toggle('active');
      document.body.style.overflow = isNowOpen ? 'hidden' : '';
      if (isNowOpen) {
        // 開いた直後にリセット
        modalSample.scrollTop = 0;
        resetAnimations();
      }
    });
  });

  // モーダル内の「閉じる」ボタン
  document.querySelectorAll('.topGallerySample__close').forEach(function (closeBtn) {
    closeBtn.addEventListener('click', function () {
      modalSample.classList.remove('active');
      document.body.style.overflow = '';
      // 閉じたときもリセットしておくと安心
      modalSample.scrollTop = 0;
      resetAnimations();
    });
  });
});
document.addEventListener('DOMContentLoaded', function () {
  var options = {
    root: null,
    rootMargin: '0px',
    threshold: 0.3
  };
  var callback = function callback(entries, observer) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('js-mask-animation');
        observer.unobserve(entry.target);
      }
    });
  };
  var observer = new IntersectionObserver(callback, options);
  document.querySelectorAll('.sample01__img').forEach(function (elm) {
    observer.observe(elm);
  });
});
var body = document.body;
var bgColorsBody = ["#ffb457", "#ff96bd", "#9999fb", "#ffe797", "#cffff1"];
var menu = body.querySelector(".menu");
var menuItems = menu.querySelectorAll(".menu__item");
var menuBorder = menu.querySelector(".menu__border");
var activeItem = menu.querySelector(".active");
function clickItem(item, index) {
  menu.style.removeProperty("--timeOut");
  if (activeItem == item) return;
  if (activeItem) {
    activeItem.classList.remove("active");
  }
  item.classList.add("active");
  body.style.backgroundColor = bgColorsBody[index];
  activeItem = item;
  offsetMenuBorder(activeItem, menuBorder);
}
function offsetMenuBorder(element, menuBorder) {
  var offsetActiveItem = element.getBoundingClientRect();
  var left = Math.floor(offsetActiveItem.left - menu.offsetLeft - (menuBorder.offsetWidth - offsetActiveItem.width) / 2) + "px";
  menuBorder.style.transform = "translate3d(".concat(left, ", 0 , 0)");
}
offsetMenuBorder(activeItem, menuBorder);
menuItems.forEach(function (item, index) {
  item.addEventListener("click", function () {
    return clickItem(item, index);
  });
});
window.addEventListener("resize", function () {
  offsetMenuBorder(activeItem, menuBorder);
  menu.style.setProperty("--timeOut", "none");
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsialF1ZXJ5Iiwid2luZG93Iiwib24iLCIkIiwid2lkdGgiLCJoZWFkZXJIaWdodCIsImNsaWNrIiwic3BlZWQiLCJocmVmIiwiYXR0ciIsInRhcmdldCIsInBvc2l0aW9uIiwib2Zmc2V0IiwidG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIndyYXBwZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ3cmFwIiwidmlkZW8iLCJxdWVyeVNlbGVjdG9yIiwiaW1nIiwic3R5bGUiLCJkaXNwbGF5IiwicGxheSIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJidXR0b24iLCJjb250YWluZXIiLCJwYXJlbnRFbGVtZW50IiwiYnRuIiwiY29kZSIsImNsb3Nlc3QiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJpbm5lclRleHQiLCJ0aGVuIiwic2V0VGltZW91dCIsInRhYiIsInQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjIiwiYWRkIiwiZ2V0QXR0cmlidXRlIiwibW9kYWwiLCJiZyIsImVsbSIsIndyYXBwZXIiLCJtb2RhbFNhbXBsZSIsInNjcm9sbGVyIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJvYnMiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidW5vYnNlcnZlIiwicm9vdCIsInRocmVzaG9sZCIsInJlc2V0QW5pbWF0aW9ucyIsImZhZGVFbHMiLCJlbCIsIm9ic2VydmUiLCJpc05vd09wZW4iLCJ0b2dnbGUiLCJib2R5Iiwib3ZlcmZsb3ciLCJjbG9zZUJ0biIsIm9wdGlvbnMiLCJyb290TWFyZ2luIiwiY2FsbGJhY2siLCJiZ0NvbG9yc0JvZHkiLCJtZW51IiwibWVudUl0ZW1zIiwibWVudUJvcmRlciIsImFjdGl2ZUl0ZW0iLCJjbGlja0l0ZW0iLCJpdGVtIiwiaW5kZXgiLCJyZW1vdmVQcm9wZXJ0eSIsImJhY2tncm91bmRDb2xvciIsIm9mZnNldE1lbnVCb3JkZXIiLCJlbGVtZW50Iiwib2Zmc2V0QWN0aXZlSXRlbSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJNYXRoIiwiZmxvb3IiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0V2lkdGgiLCJ0cmFuc2Zvcm0iLCJjb25jYXQiLCJzZXRQcm9wZXJ0eSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBQSxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsWUFBWSxDQUdwRCxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUVKO0FBQ0FGLE1BQU0sQ0FBQyxVQUFVRyxDQUFDLEVBQUU7RUFFbEI7RUFDQTs7RUFHQTtFQUNBO0VBQ0EsSUFBSUMsS0FBSyxHQUFHRCxDQUFDLENBQUNGLE1BQU0sQ0FBQyxDQUFDRyxLQUFLLENBQUMsQ0FBQztFQUM3QixJQUFJQSxLQUFLLElBQUksSUFBSSxFQUFFO0lBQ2pCLElBQUlDLFdBQVcsR0FBRyxFQUFFLENBQUMsQ0FBQztFQUN4QixDQUFDLE1BQU07SUFDTCxJQUFJQSxXQUFXLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDekI7RUFFQUYsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDRyxLQUFLLENBQUMsWUFBWTtJQUNsQyxJQUFJQyxLQUFLLEdBQUcsR0FBRztJQUNmLElBQUlDLElBQUksR0FBR0wsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDTSxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQy9CLElBQUlDLE1BQU0sR0FBR1AsQ0FBQyxDQUFDSyxJQUFJLElBQUksR0FBRyxJQUFJQSxJQUFJLElBQUksRUFBRSxHQUFHLE1BQU0sR0FBR0EsSUFBSSxDQUFDO0lBQ3pELElBQUlHLFFBQVEsR0FBR0QsTUFBTSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxDQUFDQyxHQUFHLEdBQUdSLFdBQVc7SUFDaERGLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQ1csT0FBTyxDQUFDO01BQ3RCQyxTQUFTLEVBQUVKO0lBQ2IsQ0FBQyxFQUFFSixLQUFLLEVBQUUsT0FBTyxDQUFDO0lBQ2xCLE9BQU8sS0FBSztFQUNkLENBQUMsQ0FBQztBQUlKLENBQUMsQ0FBQztBQUNGOztBQUdBO0FBQ0FTLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsWUFBTTtFQUNsRCxJQUFNQyxRQUFRLEdBQUdGLFFBQVEsQ0FBQ0csZ0JBQWdCLENBQUMseUJBQXlCLENBQUM7RUFFckVELFFBQVEsQ0FBQ0UsT0FBTyxDQUFDLFVBQUFDLElBQUksRUFBSTtJQUN2QixJQUFNQyxLQUFLLEdBQUdELElBQUksQ0FBQ0UsYUFBYSxDQUFDLE9BQU8sQ0FBQztJQUN6QyxJQUFNQyxHQUFHLEdBQUtILElBQUksQ0FBQ0UsYUFBYSxDQUFDLG9CQUFvQixDQUFDOztJQUV0RDtJQUNBLElBQUksQ0FBQ0QsS0FBSyxJQUFJLENBQUNFLEdBQUcsRUFBRTtJQUVwQkgsSUFBSSxDQUFDSixnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsWUFBTTtNQUN4Q08sR0FBRyxDQUFDQyxLQUFLLENBQUNDLE9BQU8sR0FBRyxNQUFNO01BQzFCSixLQUFLLENBQUNLLElBQUksQ0FBQyxDQUFDO0lBQ2QsQ0FBQyxDQUFDO0lBRUZOLElBQUksQ0FBQ0osZ0JBQWdCLENBQUMsWUFBWSxFQUFFLFlBQU07TUFDeENLLEtBQUssQ0FBQ00sS0FBSyxDQUFDLENBQUM7TUFDYk4sS0FBSyxDQUFDTyxXQUFXLEdBQUcsQ0FBQztNQUNyQkwsR0FBRyxDQUFDQyxLQUFLLENBQUNDLE9BQU8sR0FBRyxFQUFFLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRlYsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFNO0VBQ2xELElBQU1DLFFBQVEsR0FBR0YsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQywwQkFBMEIsQ0FBQztFQUV0RUQsUUFBUSxDQUFDRSxPQUFPLENBQUMsVUFBQUMsSUFBSSxFQUFJO0lBQ3ZCLElBQU1DLEtBQUssR0FBR0QsSUFBSSxDQUFDRSxhQUFhLENBQUMsT0FBTyxDQUFDO0lBQ3pDLElBQU1DLEdBQUcsR0FBS0gsSUFBSSxDQUFDRSxhQUFhLENBQUMsb0JBQW9CLENBQUM7O0lBRXREO0lBQ0EsSUFBSSxDQUFDRCxLQUFLLElBQUksQ0FBQ0UsR0FBRyxFQUFFO0lBRXBCSCxJQUFJLENBQUNKLGdCQUFnQixDQUFDLFlBQVksRUFBRSxZQUFNO01BQ3hDTyxHQUFHLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxHQUFHLE1BQU07TUFDMUJKLEtBQUssQ0FBQ0ssSUFBSSxDQUFDLENBQUM7SUFDZCxDQUFDLENBQUM7SUFFRk4sSUFBSSxDQUFDSixnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsWUFBTTtNQUN4Q0ssS0FBSyxDQUFDTSxLQUFLLENBQUMsQ0FBQztNQUNiTixLQUFLLENBQUNPLFdBQVcsR0FBRyxDQUFDO01BQ3JCTCxHQUFHLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzFCLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFJQTs7QUFFRlYsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBQVUsTUFBTSxFQUFJO0VBQ2pFLElBQU1DLFNBQVMsR0FBR0QsTUFBTSxDQUFDRSxhQUFhLENBQUMsQ0FBQztFQUN4QyxJQUFNVixLQUFLLEdBQU9TLFNBQVMsQ0FBQ1IsYUFBYSxDQUFDLFdBQVcsQ0FBQztFQUN0RCxJQUFNQyxHQUFHLEdBQVNPLFNBQVMsQ0FBQ1IsYUFBYSxDQUFDLG9CQUFvQixDQUFDO0VBQy9ELElBQUksQ0FBQ0QsS0FBSyxFQUFFO0VBRVpRLE1BQU0sQ0FBQ2IsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07SUFDckM7SUFDQSxJQUFJTyxHQUFHLEVBQUU7TUFDUEEsR0FBRyxDQUFDQyxLQUFLLENBQUNDLE9BQU8sR0FBRyxNQUFNO0lBQzVCOztJQUVBO0lBQ0FKLEtBQUssQ0FBQ08sV0FBVyxHQUFHLENBQUM7SUFDckJQLEtBQUssQ0FBQ0ssSUFBSSxDQUFDLENBQUM7RUFDZCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRlgsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBQVUsTUFBTSxFQUFJO0VBQ2hFLElBQU1DLFNBQVMsR0FBR0QsTUFBTSxDQUFDRSxhQUFhLENBQUMsQ0FBQztFQUN4QyxJQUFNVixLQUFLLEdBQU9TLFNBQVMsQ0FBQ1IsYUFBYSxDQUFDLFdBQVcsQ0FBQztFQUN0RCxJQUFNQyxHQUFHLEdBQVNPLFNBQVMsQ0FBQ1IsYUFBYSxDQUFDLG9CQUFvQixDQUFDO0VBQy9ELElBQUksQ0FBQ0QsS0FBSyxFQUFFO0VBRVpRLE1BQU0sQ0FBQ2IsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07SUFDckM7SUFDQSxJQUFJTyxHQUFHLEVBQUU7TUFDUEEsR0FBRyxDQUFDQyxLQUFLLENBQUNDLE9BQU8sR0FBRyxNQUFNO0lBQzVCOztJQUVBO0lBQ0FKLEtBQUssQ0FBQ08sV0FBVyxHQUFHLENBQUM7SUFDckJQLEtBQUssQ0FBQ0ssSUFBSSxDQUFDLENBQUM7RUFDZCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRlgsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFVBQUFhLEdBQUcsRUFBSTtFQUNwREEsR0FBRyxDQUFDaEIsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQVc7SUFDdkM7SUFDQSxJQUFNaUIsSUFBSSxHQUFHRCxHQUFHLENBQUNFLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDWixhQUFhLENBQUMsTUFBTSxDQUFDO0lBQzFFLElBQUksQ0FBQ1csSUFBSSxFQUFFOztJQUVYO0lBQ0FFLFNBQVMsQ0FBQ0MsU0FBUyxDQUFDQyxTQUFTLENBQUNKLElBQUksQ0FBQ0ssU0FBUyxDQUFDLENBQUNDLElBQUksQ0FBQyxZQUFNO01BQ3ZEUCxHQUFHLENBQUNNLFNBQVMsR0FBRyxTQUFTO01BQ3pCRSxVQUFVLENBQUM7UUFBQSxPQUFNUixHQUFHLENBQUNNLFNBQVMsR0FBRyxNQUFNO01BQUEsR0FBRSxJQUFJLENBQUM7SUFDaEQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBSUZ2QixRQUFRLENBQUNHLGdCQUFnQixDQUFDLHdCQUF3QixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFBc0IsR0FBRyxFQUFJO0VBQ2pFQSxHQUFHLENBQUN6QixnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBVztJQUN2QztJQUNBRCxRQUFRLENBQUNHLGdCQUFnQixDQUFDLHdCQUF3QixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFBdUIsQ0FBQztNQUFBLE9BQUlBLENBQUMsQ0FBQ0MsU0FBUyxDQUFDQyxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQUEsRUFBQztJQUM5RjtJQUNBN0IsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBQTBCLENBQUM7TUFBQSxPQUFJQSxDQUFDLENBQUNyQixLQUFLLENBQUNDLE9BQU8sR0FBRyxNQUFNO0lBQUEsRUFBQzs7SUFFMUY7SUFDQWdCLEdBQUcsQ0FBQ0UsU0FBUyxDQUFDRyxHQUFHLENBQUMsUUFBUSxDQUFDO0lBQzNCO0lBQ0EsSUFBTXJDLE1BQU0sR0FBR2dDLEdBQUcsQ0FBQ00sWUFBWSxDQUFDLFVBQVUsQ0FBQztJQUMzQ2hDLFFBQVEsQ0FBQ08sYUFBYSxDQUFDLG1DQUFtQyxHQUFHYixNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUNlLEtBQUssQ0FBQ0MsT0FBTyxHQUFHLE9BQU87RUFDckcsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBR0ZWLFFBQVEsQ0FBQ0csZ0JBQWdCLENBQUMseUJBQXlCLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFVBQVNhLEdBQUcsRUFBRTtFQUN6RUEsR0FBRyxDQUFDaEIsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQVc7SUFDdkNELFFBQVEsQ0FBQ08sYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUNxQixTQUFTLENBQUNHLEdBQUcsQ0FBQyxRQUFRLENBQUM7SUFDbEUvQixRQUFRLENBQUNPLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDcUIsU0FBUyxDQUFDRyxHQUFHLENBQUMsUUFBUSxDQUFDO0VBQ3hFLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFLRjtBQUNBO0FBQ0EvQixRQUFRLENBQUNHLGdCQUFnQixDQUFDLHlCQUF5QixDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFTYSxHQUFHLEVBQUU7RUFDekVBLEdBQUcsQ0FBQ2hCLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFXO0lBQ3ZDLElBQU1nQyxLQUFLLEdBQUdqQyxRQUFRLENBQUNPLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQztJQUN4RCxJQUFNMkIsRUFBRSxHQUFHbEMsUUFBUSxDQUFDTyxhQUFhLENBQUMsc0JBQXNCLENBQUM7SUFDekQwQixLQUFLLENBQUNMLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDbkNJLEtBQUssQ0FBQ0wsU0FBUyxDQUFDRyxHQUFHLENBQUMsUUFBUSxDQUFDO0lBQzdCRyxFQUFFLENBQUNOLFNBQVMsQ0FBQ0csR0FBRyxDQUFDLFFBQVEsQ0FBQztFQUM1QixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0EvQixRQUFRLENBQUNHLGdCQUFnQixDQUFDLCtDQUErQyxDQUFDLENBQUNDLE9BQU8sQ0FBQyxVQUFTK0IsR0FBRyxFQUFFO0VBQy9GQSxHQUFHLENBQUNsQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBVztJQUN2QyxJQUFNZ0MsS0FBSyxHQUFLakMsUUFBUSxDQUFDTyxhQUFhLENBQUMsa0JBQWtCLENBQUM7SUFDMUQsSUFBTTZCLE9BQU8sR0FBR0gsS0FBSyxDQUFDMUIsYUFBYSxDQUFDLDJCQUEyQixDQUFDO0lBQ2hFLElBQU0yQixFQUFFLEdBQVFsQyxRQUFRLENBQUNPLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQzs7SUFFOUQ7SUFDQTBCLEtBQUssQ0FBQ0wsU0FBUyxDQUFDQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBRztJQUNwQ0ksS0FBSyxDQUFDTCxTQUFTLENBQUNHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFLO0lBQ3BDRyxFQUFFLENBQUNOLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLFFBQVEsQ0FBQzs7SUFFN0I7SUFDQUosVUFBVSxDQUFDLFlBQVc7TUFDcEIsSUFBSVcsT0FBTyxFQUFFO1FBQ1hBLE9BQU8sQ0FBQ3JDLFNBQVMsR0FBRyxDQUFDO01BQ3ZCO01BQ0FrQyxLQUFLLENBQUNMLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLFNBQVMsQ0FBQztNQUNqQztJQUNGLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBTUY3QixRQUFRLENBQUNDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLFlBQU07RUFDbEQsSUFBTW9DLFdBQVcsR0FBR3JDLFFBQVEsQ0FBQ08sYUFBYSxDQUFDLG1CQUFtQixDQUFDO0VBQy9ELElBQU0rQixRQUFRLEdBQU1ELFdBQVcsQ0FBQyxDQUFpQjs7RUFFakQ7RUFDQSxJQUFNRSxRQUFRLEdBQUcsSUFBSUMsb0JBQW9CLENBQUMsVUFBQ0MsT0FBTyxFQUFFQyxHQUFHLEVBQUs7SUFDMURELE9BQU8sQ0FBQ3JDLE9BQU8sQ0FBQyxVQUFBdUMsS0FBSyxFQUFJO01BQ3ZCLElBQUlBLEtBQUssQ0FBQ0MsY0FBYyxFQUFFO1FBQ3hCRCxLQUFLLENBQUNqRCxNQUFNLENBQUNrQyxTQUFTLENBQUNHLEdBQUcsQ0FBQyxZQUFZLENBQUM7UUFDeENXLEdBQUcsQ0FBQ0csU0FBUyxDQUFDRixLQUFLLENBQUNqRCxNQUFNLENBQUM7TUFDN0I7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLEVBQUU7SUFDRG9ELElBQUksRUFBRVIsUUFBUTtJQUNkUyxTQUFTLEVBQUU7RUFDYixDQUFDLENBQUM7O0VBRUY7RUFDQSxTQUFTQyxlQUFlQSxDQUFBLEVBQUc7SUFDekJDLE9BQU8sQ0FBQzdDLE9BQU8sQ0FBQyxVQUFBOEMsRUFBRSxFQUFJO01BQ3BCQSxFQUFFLENBQUN0QixTQUFTLENBQUNDLE1BQU0sQ0FBQyxZQUFZLENBQUM7TUFDakNVLFFBQVEsQ0FBQ1ksT0FBTyxDQUFDRCxFQUFFLENBQUM7SUFDdEIsQ0FBQyxDQUFDO0VBQ0o7O0VBRUE7RUFDQWxELFFBQVEsQ0FBQ0csZ0JBQWdCLENBQUMsMkJBQTJCLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFVBQUFhLEdBQUcsRUFBSTtJQUNwRUEsR0FBRyxDQUFDaEIsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07TUFDbEMsSUFBTW1ELFNBQVMsR0FBR2YsV0FBVyxDQUFDVCxTQUFTLENBQUN5QixNQUFNLENBQUMsUUFBUSxDQUFDO01BQ3hEckQsUUFBUSxDQUFDc0QsSUFBSSxDQUFDN0MsS0FBSyxDQUFDOEMsUUFBUSxHQUFHSCxTQUFTLEdBQUcsUUFBUSxHQUFHLEVBQUU7TUFDeEQsSUFBSUEsU0FBUyxFQUFFO1FBQ2I7UUFDQWYsV0FBVyxDQUFDdEMsU0FBUyxHQUFHLENBQUM7UUFDekJpRCxlQUFlLENBQUMsQ0FBQztNQUNuQjtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQzs7RUFFRjtFQUNBaEQsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBQW9ELFFBQVEsRUFBSTtJQUN4RUEsUUFBUSxDQUFDdkQsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07TUFDdkNvQyxXQUFXLENBQUNULFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLFFBQVEsQ0FBQztNQUN0QzdCLFFBQVEsQ0FBQ3NELElBQUksQ0FBQzdDLEtBQUssQ0FBQzhDLFFBQVEsR0FBRyxFQUFFO01BQ2pDO01BQ0FsQixXQUFXLENBQUN0QyxTQUFTLEdBQUcsQ0FBQztNQUN6QmlELGVBQWUsQ0FBQyxDQUFDO0lBQ25CLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUlGaEQsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFNO0VBQ2xELElBQU13RCxPQUFPLEdBQUc7SUFDZFgsSUFBSSxFQUFFLElBQUk7SUFDVlksVUFBVSxFQUFFLEtBQUs7SUFDakJYLFNBQVMsRUFBRTtFQUNiLENBQUM7RUFFRCxJQUFNWSxRQUFRLEdBQUcsU0FBWEEsUUFBUUEsQ0FBSWxCLE9BQU8sRUFBRUYsUUFBUSxFQUFLO0lBQ3RDRSxPQUFPLENBQUNyQyxPQUFPLENBQUMsVUFBQXVDLEtBQUssRUFBSTtNQUN2QixJQUFJQSxLQUFLLENBQUNDLGNBQWMsRUFBRTtRQUN4QkQsS0FBSyxDQUFDakQsTUFBTSxDQUFDa0MsU0FBUyxDQUFDRyxHQUFHLENBQUMsbUJBQW1CLENBQUM7UUFDL0NRLFFBQVEsQ0FBQ00sU0FBUyxDQUFDRixLQUFLLENBQUNqRCxNQUFNLENBQUM7TUFDbEM7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDO0VBRUQsSUFBTTZDLFFBQVEsR0FBRyxJQUFJQyxvQkFBb0IsQ0FBQ21CLFFBQVEsRUFBRUYsT0FBTyxDQUFDO0VBRTVEekQsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDQyxPQUFPLENBQUMsVUFBQStCLEdBQUcsRUFBSTtJQUN6REksUUFBUSxDQUFDWSxPQUFPLENBQUNoQixHQUFHLENBQUM7RUFDdkIsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBS0YsSUFBTW1CLElBQUksR0FBR3RELFFBQVEsQ0FBQ3NELElBQUk7QUFDMUIsSUFBTU0sWUFBWSxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQztBQUM1RSxJQUFNQyxJQUFJLEdBQUdQLElBQUksQ0FBQy9DLGFBQWEsQ0FBQyxPQUFPLENBQUM7QUFDeEMsSUFBTXVELFNBQVMsR0FBR0QsSUFBSSxDQUFDMUQsZ0JBQWdCLENBQUMsYUFBYSxDQUFDO0FBQ3RELElBQU00RCxVQUFVLEdBQUdGLElBQUksQ0FBQ3RELGFBQWEsQ0FBQyxlQUFlLENBQUM7QUFDdEQsSUFBSXlELFVBQVUsR0FBR0gsSUFBSSxDQUFDdEQsYUFBYSxDQUFDLFNBQVMsQ0FBQztBQUU5QyxTQUFTMEQsU0FBU0EsQ0FBQ0MsSUFBSSxFQUFFQyxLQUFLLEVBQUU7RUFFNUJOLElBQUksQ0FBQ3BELEtBQUssQ0FBQzJELGNBQWMsQ0FBQyxXQUFXLENBQUM7RUFFdEMsSUFBSUosVUFBVSxJQUFJRSxJQUFJLEVBQUU7RUFFeEIsSUFBSUYsVUFBVSxFQUFFO0lBQ1pBLFVBQVUsQ0FBQ3BDLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLFFBQVEsQ0FBQztFQUN6QztFQUdBcUMsSUFBSSxDQUFDdEMsU0FBUyxDQUFDRyxHQUFHLENBQUMsUUFBUSxDQUFDO0VBQzVCdUIsSUFBSSxDQUFDN0MsS0FBSyxDQUFDNEQsZUFBZSxHQUFHVCxZQUFZLENBQUNPLEtBQUssQ0FBQztFQUNoREgsVUFBVSxHQUFHRSxJQUFJO0VBQ2pCSSxnQkFBZ0IsQ0FBQ04sVUFBVSxFQUFFRCxVQUFVLENBQUM7QUFHNUM7QUFFQSxTQUFTTyxnQkFBZ0JBLENBQUNDLE9BQU8sRUFBRVIsVUFBVSxFQUFFO0VBRTNDLElBQU1TLGdCQUFnQixHQUFHRCxPQUFPLENBQUNFLHFCQUFxQixDQUFDLENBQUM7RUFDeEQsSUFBTUMsSUFBSSxHQUFHQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0osZ0JBQWdCLENBQUNFLElBQUksR0FBR2IsSUFBSSxDQUFDZ0IsVUFBVSxHQUFHLENBQUNkLFVBQVUsQ0FBQ2UsV0FBVyxHQUFJTixnQkFBZ0IsQ0FBQ3BGLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBSSxJQUFJO0VBQ2pJMkUsVUFBVSxDQUFDdEQsS0FBSyxDQUFDc0UsU0FBUyxrQkFBQUMsTUFBQSxDQUFrQk4sSUFBSSxhQUFVO0FBRTlEO0FBRUFKLGdCQUFnQixDQUFDTixVQUFVLEVBQUVELFVBQVUsQ0FBQztBQUV4Q0QsU0FBUyxDQUFDMUQsT0FBTyxDQUFDLFVBQUM4RCxJQUFJLEVBQUVDLEtBQUssRUFBSztFQUUvQkQsSUFBSSxDQUFDakUsZ0JBQWdCLENBQUMsT0FBTyxFQUFFO0lBQUEsT0FBTWdFLFNBQVMsQ0FBQ0MsSUFBSSxFQUFFQyxLQUFLLENBQUM7RUFBQSxFQUFDO0FBRWhFLENBQUMsQ0FBQztBQUVGbEYsTUFBTSxDQUFDZ0IsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLFlBQU07RUFDcENxRSxnQkFBZ0IsQ0FBQ04sVUFBVSxFQUFFRCxVQUFVLENBQUM7RUFDeENGLElBQUksQ0FBQ3BELEtBQUssQ0FBQ3dFLFdBQVcsQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDO0FBQy9DLENBQUMsQ0FBQyIsImZpbGUiOiJiYXNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gc2Nyb2xsIGNsYXNzIGFkZFxualF1ZXJ5KHdpbmRvdykub24oXCJsb2FkIHNjcm9sbCByZXNpemVcIiwgZnVuY3Rpb24gKCkge1xuXG5cbn0pOyAvLyBzY3JvbGwgY2xhc3MgYWRkIEVORFxuXG4vLyBqUXVlcnkgc3RhcnRcbmpRdWVyeShmdW5jdGlvbiAoJCkge1xuXG4gIC8vIFNQIDEwMHZoKOOCueOCr+ODreODvOODq+ODkOODvOWvvuetlilcbiAgLy8gJCgnLmxvYWRpbmdMb2dvJykuY3NzKCdoZWlnaHQnLCQod2luZG93KS5oZWlnaHQoKSk7XG5cblxuICAvLyBTbW9vdGggc2Nyb2xsXG4gIC8vIOODmuODvOOCuOWGheODquODs+OCr1xuICB2YXIgd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcbiAgaWYgKHdpZHRoIDw9IDEwMjMpIHtcbiAgICB2YXIgaGVhZGVySGlnaHQgPSA2MDsgLy/jg5jjg4Pjg4Djga7pq5jjgZVcbiAgfSBlbHNlIHtcbiAgICB2YXIgaGVhZGVySGlnaHQgPSAxMDA7IC8v44OY44OD44OA44Gu6auY44GVXG4gIH1cblxuICAkKCdhW2hyZWZePVwiI1wiXScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc3BlZWQgPSA4MDA7XG4gICAgdmFyIGhyZWYgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpO1xuICAgIHZhciB0YXJnZXQgPSAkKGhyZWYgPT0gXCIjXCIgfHwgaHJlZiA9PSBcIlwiID8gJ2h0bWwnIDogaHJlZik7XG4gICAgdmFyIHBvc2l0aW9uID0gdGFyZ2V0Lm9mZnNldCgpLnRvcCAtIGhlYWRlckhpZ2h0O1xuICAgICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoe1xuICAgICAgc2Nyb2xsVG9wOiBwb3NpdGlvblxuICAgIH0sIHNwZWVkLCBcInN3aW5nXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG5cblxuXG59KTtcbi8vIGpRdWVyeSBFbmRcblxuXG4vLyAxLiDlhajjgabjga7jg6njg4Pjg5Hjg7zopoHntKDjgpLlj5blvpdcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGNvbnN0IHdyYXBwZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbGxlcnlDYXJkX192aWRlb1dyYXAnKTtcblxuICB3cmFwcGVycy5mb3JFYWNoKHdyYXAgPT4ge1xuICAgIGNvbnN0IHZpZGVvID0gd3JhcC5xdWVyeVNlbGVjdG9yKCd2aWRlbycpO1xuICAgIGNvbnN0IGltZyAgID0gd3JhcC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeU1vZGFsX19pbWcnKTtcblxuICAgIC8vIHZpZGVvIOOBvuOBn+OBryBpbWcg44GM6KaL44Gk44GL44KJ44Gq44GR44KM44Gw44K544Kt44OD44OXXG4gICAgaWYgKCF2aWRlbyB8fCAhaW1nKSByZXR1cm47XG5cbiAgICB3cmFwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICB9KTtcblxuICAgIHdyYXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgIHZpZGVvLnBhdXNlKCk7XG4gICAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XG4gICAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICcnOyAvLyDlv4XopoHjgavlv5zjgZjjgaYgJ2Jsb2NrJyDjgarjganjgpLmjIflrppcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3Qgd3JhcHBlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeU1vZGFsX192aWRlb1dyYXAnKTtcblxuICB3cmFwcGVycy5mb3JFYWNoKHdyYXAgPT4ge1xuICAgIGNvbnN0IHZpZGVvID0gd3JhcC5xdWVyeVNlbGVjdG9yKCd2aWRlbycpO1xuICAgIGNvbnN0IGltZyAgID0gd3JhcC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeU1vZGFsX19pbWcnKTtcblxuICAgIC8vIHZpZGVvIOOBvuOBn+OBryBpbWcg44GM6KaL44Gk44GL44KJ44Gq44GR44KM44Gw44K544Kt44OD44OXXG4gICAgaWYgKCF2aWRlbyB8fCAhaW1nKSByZXR1cm47XG5cbiAgICB3cmFwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIHZpZGVvLnBsYXkoKTtcbiAgICB9KTtcblxuICAgIHdyYXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgIHZpZGVvLnBhdXNlKCk7XG4gICAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XG4gICAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICcnOyAvLyDlv4XopoHjgavlv5zjgZjjgaYgJ2Jsb2NrJyDjgarjganjgpLmjIflrppcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuXG5cbiAgLy8g4pa8IFBsYXnjg5zjgr/jg7PjgpLmirzjgZfjgZ/jgonlhYjpoK3jgYvjgonlho3nlJ/vvIhTUOWQkeOBkeOCguWQq+OCgO+8iVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeU1vZGFsX19wbGF5JykuZm9yRWFjaChidXR0b24gPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBidXR0b24ucGFyZW50RWxlbWVudDsgLy8gLmdhbGxlcnlNb2RhbF9fdmlkZW9Db250ZW50XG4gIGNvbnN0IHZpZGVvICAgICA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuanMtdmlkZW8nKTtcbiAgY29uc3QgaW1nICAgICAgID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5TW9kYWxfX2ltZycpO1xuICBpZiAoIXZpZGVvKSByZXR1cm47XG5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIC8vIOeUu+WDj+OCkumdnuihqOekuuOBq+OBmeOCi1xuICAgIGlmIChpbWcpIHtcbiAgICAgIGltZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cblxuICAgIC8vIOWLleeUu+OCkuWFiOmgreOBq+aIu+OBl+OBpuWGjeeUn1xuICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gMDtcbiAgICB2aWRlby5wbGF5KCk7XG4gIH0pO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5Q2FyZF9fcGxheScpLmZvckVhY2goYnV0dG9uID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gYnV0dG9uLnBhcmVudEVsZW1lbnQ7IC8vIC5nYWxsZXJ5TW9kYWxfX3ZpZGVvQ29udGVudFxuICBjb25zdCB2aWRlbyAgICAgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmpzLXZpZGVvJyk7XG4gIGNvbnN0IGltZyAgICAgICA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeU1vZGFsX19pbWcnKTtcbiAgaWYgKCF2aWRlbykgcmV0dXJuO1xuXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAvLyDnlLvlg4/jgpLpnZ7ooajnpLrjgavjgZnjgotcbiAgICBpZiAoaW1nKSB7XG4gICAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG5cbiAgICAvLyDli5XnlLvjgpLlhYjpoK3jgavmiLvjgZfjgablho3nlJ9cbiAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XG4gICAgdmlkZW8ucGxheSgpO1xuICB9KTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29weS1idG4nKS5mb3JFYWNoKGJ0biA9PiB7XG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIC8vIOKRoCDjg5zjgr/jg7Pjga7opqropoHntKDlhoXjga48Y29kZT7jgpLmjqLjgZlcbiAgICBjb25zdCBjb2RlID0gYnRuLmNsb3Nlc3QoJy50b3BHYWxsZXJ5TW9kYWxfX2RldGFpbCcpLnF1ZXJ5U2VsZWN0b3IoJ2NvZGUnKTtcbiAgICBpZiAoIWNvZGUpIHJldHVybjtcblxuICAgIC8vIOKRoSDjgrPjg5Tjg7xcbiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChjb2RlLmlubmVyVGV4dCkudGhlbigoKSA9PiB7XG4gICAgICBidG4uaW5uZXJUZXh0ID0gJ0NvcGllZCEnO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBidG4uaW5uZXJUZXh0ID0gJ0NvcHknLCAxMjAwKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b3BHYWxsZXJ5TW9kYWxfX2l0ZW0nKS5mb3JFYWNoKHRhYiA9PiB7XG4gIHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIC8vIOOBmeOBueOBpuOBruOCv+ODluOBi+OCiWFjdGl2ZeOCkuWkluOBmVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b3BHYWxsZXJ5TW9kYWxfX2l0ZW0nKS5mb3JFYWNoKHQgPT4gdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG4gICAgLy8g44GZ44G544Gm44Gu44Kz44O844OJ44OR44ON44Or44KS6Z2e6KGo56S644GrXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvcEdhbGxlcnlNb2RhbF9fY29kZScpLmZvckVhY2goYyA9PiBjLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpO1xuICAgIFxuICAgIC8vIOOCr+ODquODg+OCr+OBl+OBn+OCv+ODluOBq2FjdGl2ZeOCkuOBpOOBkeOCi1xuICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAvLyDlkIzjgZhkYXRhLXRhYuOBruOCs+ODvOODieOCkuihqOekulxuICAgIGNvbnN0IHRhcmdldCA9IHRhYi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFiJyk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbF9fY29kZVtkYXRhLXRhYj1cIicgKyB0YXJnZXQgKyAnXCJdJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH0pO1xufSk7XG5cblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbGxlcnlDYXJkX19idG4tLWNvZGUnKS5mb3JFYWNoKGZ1bmN0aW9uKGJ0bikge1xuICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wR2FsbGVyeU1vZGFsJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbF9fYmcnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfSk7XG59KTtcblxuXG5cblxuLy8g44Oi44O844OA44Or44KS6ZaL44GPXG4vLyDjg6Ljg7zjg4Djg6vjgpLplovjgY9cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5Q2FyZF9fYnRuLS1jb2RlJykuZm9yRWFjaChmdW5jdGlvbihidG4pIHtcbiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wR2FsbGVyeU1vZGFsJyk7XG4gICAgY29uc3QgYmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wR2FsbGVyeU1vZGFsX19iZycpO1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NpbmcnKTsgLy8g5b+144Gu44Gf44KB5aSW44GZXG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgYmcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH0pO1xufSk7XG5cbi8vIOODouODvOODgOODq+OCkumWieOBmOOCi1xuLy8gdG9wR2FsbGVyeU1vZGFsIOOCkumWieOBmOOCi+mam+OBq+OCueOCr+ODreODvOODq+S9jee9ruOCkuODquOCu+ODg+ODiOOBmeOCi1xuLy8gdG9wR2FsbGVyeU1vZGFsIOOCkumWieOBmOOCi+mam+OBqyAwLjUg56eS5b6M44GrIHdyYXBwZXIuc2Nyb2xsVG9wID0gMCDjgpLlrp/ooYzjgZnjgotcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b3BHYWxsZXJ5TW9kYWxfX2Nsb3NlLCAudG9wR2FsbGVyeU1vZGFsX19iZycpLmZvckVhY2goZnVuY3Rpb24oZWxtKSB7XG4gIGVsbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IG1vZGFsICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wR2FsbGVyeU1vZGFsJyk7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy50b3BHYWxsZXJ5TW9kYWxfX3dyYXBwZXInKTtcbiAgICBjb25zdCBiZyAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcEdhbGxlcnlNb2RhbF9fYmcnKTtcblxuICAgIC8vIOODouODvOODgOODq+OCkumWieOBmOOCi+OCr+ODqeOCueaTjeS9nFxuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOyAgIC8vIOmWi+OBj+eUqOOCr+ODqeOCueOCkuWkluOBmVxuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2Nsb3NpbmcnKTsgICAgIC8vIOmWieOBmOOCi+OCouODi+ODoeeUqOOCr+ODqeOCueOCkuS7mOOBkeOCi1xuICAgIGJnLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXG4gICAgLy8gMC4156eS5b6M44Gr44K544Kv44Ot44O844Or5L2N572u44KS44Oq44K744OD44OI44GX44CBY2xvc2luZyDjgq/jg6njgrnjgpLlpJbjgZlcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHdyYXBwZXIpIHtcbiAgICAgICAgd3JhcHBlci5zY3JvbGxUb3AgPSAwO1xuICAgICAgfVxuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnY2xvc2luZycpO1xuICAgICAgLy8g5b+F6KaB44Gq44KJ44GT44GT44GnIGRpc3BsYXk6IG5vbmU7IOOCkuOBpOOBkeOBpuOCgk9LXG4gICAgfSwgNTAwKTsgLy8gMC41cyDihpIg6ZaJ44GY44KL44Ki44OL44Oh44O844K344On44Oz44Gu5omA6KaB5pmC6ZaT44Gr5ZCI44KP44Gb44KLXG4gIH0pO1xufSk7XG5cblxuXG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3QgbW9kYWxTYW1wbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wR2FsbGVyeVNhbXBsZScpO1xuICBjb25zdCBzY3JvbGxlciAgICA9IG1vZGFsU2FtcGxlOyAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIGNvbnRhaW5lclxuXG4gIC8vIEludGVyc2VjdGlvbk9ic2VydmVyIOOBruioreWumlxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcywgb2JzKSA9PiB7XG4gICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpO1xuICAgICAgICBvYnMudW5vYnNlcnZlKGVudHJ5LnRhcmdldCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIHtcbiAgICByb290OiBzY3JvbGxlcixcbiAgICB0aHJlc2hvbGQ6IDAuMVxuICB9KTtcblxuICAvLyDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PnirbmhYvjgpLjg6rjgrvjg4Pjg4jjgZfjgablho3nm6PoppbjgZnjgovplqLmlbBcbiAgZnVuY3Rpb24gcmVzZXRBbmltYXRpb25zKCkge1xuICAgIGZhZGVFbHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy12aXNpYmxlJyk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKGVsKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOODouODvOODgOODq+OCkumWi+OBj++8j+mWieOBmOOCi+ODnOOCv+ODs1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeUNhcmRfX2J0bi0tc2FtcGxlJykuZm9yRWFjaChidG4gPT4ge1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGlzTm93T3BlbiA9IG1vZGFsU2FtcGxlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IGlzTm93T3BlbiA/ICdoaWRkZW4nIDogJyc7XG4gICAgICBpZiAoaXNOb3dPcGVuKSB7XG4gICAgICAgIC8vIOmWi+OBhOOBn+ebtOW+jOOBq+ODquOCu+ODg+ODiFxuICAgICAgICBtb2RhbFNhbXBsZS5zY3JvbGxUb3AgPSAwO1xuICAgICAgICByZXNldEFuaW1hdGlvbnMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8g44Oi44O844OA44Or5YaF44Gu44CM6ZaJ44GY44KL44CN44Oc44K/44OzXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b3BHYWxsZXJ5U2FtcGxlX19jbG9zZScpLmZvckVhY2goY2xvc2VCdG4gPT4ge1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbW9kYWxTYW1wbGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICAvLyDplonjgZjjgZ/jgajjgY3jgoLjg6rjgrvjg4Pjg4jjgZfjgabjgYrjgY/jgajlronlv4NcbiAgICAgIG1vZGFsU2FtcGxlLnNjcm9sbFRvcCA9IDA7XG4gICAgICByZXNldEFuaW1hdGlvbnMoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgcm9vdDogbnVsbCxcbiAgICByb290TWFyZ2luOiAnMHB4JyxcbiAgICB0aHJlc2hvbGQ6IDAuM1xuICB9O1xuXG4gIGNvbnN0IGNhbGxiYWNrID0gKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XG4gICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnanMtbWFzay1hbmltYXRpb24nKTtcbiAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVudHJ5LnRhcmdldCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoY2FsbGJhY2ssIG9wdGlvbnMpO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zYW1wbGUwMV9faW1nJykuZm9yRWFjaChlbG0gPT4ge1xuICAgIG9ic2VydmVyLm9ic2VydmUoZWxtKTtcbiAgfSk7XG59KTtcblxuXG5cblxuY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5jb25zdCBiZ0NvbG9yc0JvZHkgPSBbXCIjZmZiNDU3XCIsIFwiI2ZmOTZiZFwiLCBcIiM5OTk5ZmJcIiwgXCIjZmZlNzk3XCIsIFwiI2NmZmZmMVwiXTtcbmNvbnN0IG1lbnUgPSBib2R5LnF1ZXJ5U2VsZWN0b3IoXCIubWVudVwiKTtcbmNvbnN0IG1lbnVJdGVtcyA9IG1lbnUucXVlcnlTZWxlY3RvckFsbChcIi5tZW51X19pdGVtXCIpO1xuY29uc3QgbWVudUJvcmRlciA9IG1lbnUucXVlcnlTZWxlY3RvcihcIi5tZW51X19ib3JkZXJcIik7XG5sZXQgYWN0aXZlSXRlbSA9IG1lbnUucXVlcnlTZWxlY3RvcihcIi5hY3RpdmVcIik7XG5cbmZ1bmN0aW9uIGNsaWNrSXRlbShpdGVtLCBpbmRleCkge1xuXG4gICAgbWVudS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcIi0tdGltZU91dFwiKTtcbiAgICBcbiAgICBpZiAoYWN0aXZlSXRlbSA9PSBpdGVtKSByZXR1cm47XG4gICAgXG4gICAgaWYgKGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgYWN0aXZlSXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIH1cblxuICAgIFxuICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICBib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJnQ29sb3JzQm9keVtpbmRleF07XG4gICAgYWN0aXZlSXRlbSA9IGl0ZW07XG4gICAgb2Zmc2V0TWVudUJvcmRlcihhY3RpdmVJdGVtLCBtZW51Qm9yZGVyKTtcbiAgICBcbiAgICBcbn1cblxuZnVuY3Rpb24gb2Zmc2V0TWVudUJvcmRlcihlbGVtZW50LCBtZW51Qm9yZGVyKSB7XG5cbiAgICBjb25zdCBvZmZzZXRBY3RpdmVJdGVtID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBsZWZ0ID0gTWF0aC5mbG9vcihvZmZzZXRBY3RpdmVJdGVtLmxlZnQgLSBtZW51Lm9mZnNldExlZnQgLSAobWVudUJvcmRlci5vZmZzZXRXaWR0aCAgLSBvZmZzZXRBY3RpdmVJdGVtLndpZHRoKSAvIDIpICsgIFwicHhcIjtcbiAgICBtZW51Qm9yZGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke2xlZnR9LCAwICwgMClgO1xuXG59XG5cbm9mZnNldE1lbnVCb3JkZXIoYWN0aXZlSXRlbSwgbWVudUJvcmRlcik7XG5cbm1lbnVJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xpY2tJdGVtKGl0ZW0sIGluZGV4KSk7XG4gICAgXG59KVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XG4gICAgb2Zmc2V0TWVudUJvcmRlcihhY3RpdmVJdGVtLCBtZW51Qm9yZGVyKTtcbiAgICBtZW51LnN0eWxlLnNldFByb3BlcnR5KFwiLS10aW1lT3V0XCIsIFwibm9uZVwiKTtcbn0pOyJdfQ==
